var documenterSearchIndex = {"docs":
[{"location":"install/#Installing-the-package","page":"Installing the package","title":"Installing the package","text":"","category":"section"},{"location":"data/#Data","page":"Data","title":"Data","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"This user guide describes the basic structures and functions to run the base models provided in the package, and define your biome schemes and run them.","category":"page"},{"location":"data/#Requirements-in-Input-data","page":"Data","title":"Requirements in Input data","text":"","category":"section"},{"location":"data/#Climatological-and-soil-input","page":"Data","title":"Climatological and soil input","text":"","category":"section"},{"location":"data/#1.-Climatological-data","page":"Data","title":"1. Climatological data","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"The Climatological data, temperature, tmin, cloud cover, and precipitation is downloaded from the CHELSA database. Each variable is downloaded for a specified year, for each month of the year.  Aside for yearly data, the CHELSA database also provides averaged datasets over longer time periods. ","category":"page"},{"location":"data/#2.-Soil-characteristics-data","page":"Data","title":"2. Soil characteristics data","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"The data on soil characteristics are generated using the makesoil module from Arve research. This script will automatically generate a NetCDF file with the two variables that are necessary to run BIOME4: the soil water holding capacity (whc), and the soil saturated conductivity (Ksat).","category":"page"},{"location":"data/#Climate-Envelope-Models","page":"Data","title":"Climate Envelope Models","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"The climate envelope models are a reimplementation in Julia of the CHELSA module for Mapping climatologies at high resolutions. The original code is available for use in SAGA","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"The Thornthwaite, TrollPfaffen, and Wissmann models will work with ","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"Temperature climatologies\nPrecipiation climatologies","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"The Köppen-Geiger model will additionally require latitudinal and longitudinal information. ","category":"page"},{"location":"data/#Mechanistic-Models","page":"Data","title":"Mechanistic Models","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"The BIOME4 model and other PFT-based frameworks require the following variables to run (in the form of gridded fields):","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"climatological monthly mean fields of temperature (°C)\nclimatological monthly mean cloud cover (%)\nclimatological mean monthly total precipitation (mm)\nsoil water holding capacity in two or more layers (mm/mm)\nsoil saturated conductivity in two or more layers (mm/h)","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"BIOME4 also requires a single global value for atmospheric CO₂ concentrations","category":"page"},{"location":"data/#How-to-use-the-model","page":"Data","title":"How to use the model","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"This package includes a Julia script that can be executed to run the BIOME4 model using specific environmental data files. The script requires several input files (e.g., temperature, precipitation, etc.), a CO2 concentration, and the coordinates of the region where the model will run.","category":"page"},{"location":"data/#Command-Example","page":"Data","title":"Command Example","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"You can run the model using the following SLURM command:","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"julia --project=. src/driver.jl --coordstring \"alldata\"\\\n  --co2 373.847 \\\n  --tempfile  \"path/to/tempfile.nc\" \\\n  --precfile \"path/to/precfile.nc\"\\\n  --sunfile \"path/to/sunfile.nc\"\\\n  --soilfile \"path/to/soilfile.nc\"\"\\\n  --year \"NAME\"\\\n  --model \"biome4\"\n","category":"page"},{"location":"trollpfaffen/#Troll-Pfaffen","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"","category":"section"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"The Troll–Paffen scheme partitions Earth’s climates into 38 seasonal‑interference types based on the interaction of three “seasonal climates”: illumination (astronomic insolation seasons), temperature (thermic seasons) and moisture (hygric seasons) and outputs zones from polar ice‑deserts through tropical rain‑forest ","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"(Image: tp)","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"In the provided implementation, twelve monthly temperatures and precipitations are first reduced to statistics (min, max, mean, range, annual total), as well as derived metrics—growing‑degree days above 5 °C and the average number of humid months where daily rainfall exceeds twice daily temperature (via getgrowingdegreedays and gethumidmonths). A decision tree then applies Troll–Paffen thresholds (e.g. tempmax < 0 °C → “Polar ice‑desert”, ranges of growing‑degree days and humid‑month counts for boreal, temperate, steppe, subtropical and tropical belts, with hemisphere‑adjusted seasonal humidity criteria).","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"You can call this model using ","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"","category":"page"},{"location":"trollpfaffen/#References","page":"Troll-Pfaffen","title":"References","text":"","category":"section"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"Troll, C. (1964). Karte der Jahreszeiten-Klimate der Erde. ERDKUNDE, 18(1), Article 1. https://doi.org/10.3112/erdkunde.1964.01.02","category":"page"},{"location":"biomes/#Defining-new-Biomes","page":"Biomes","title":"Defining new Biomes","text":"","category":"section"},{"location":"biomes/#The-biome-concept","page":"Biomes","title":"The biome concept","text":"","category":"section"},{"location":"biomes/#Biomes-in-the-model","page":"Biomes","title":"Biomes in the model","text":"","category":"section"},{"location":"biomes/#Defining-your-own-biomes","page":"Biomes","title":"Defining your own biomes","text":"","category":"section"},{"location":"pfts/#Plant-functional-types","page":"Plant Functional Types","title":"Plant functional types","text":"","category":"section"},{"location":"pfts/#The-PFT-concept","page":"Plant Functional Types","title":"The PFT concept","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"Plant functional types (PFTs) are the basis of the mechanical schemes. Instead of defining individual species, which tend to be restricted to a single area of the globe, or not extensively studies, PFTs allow to generalize life forms and strategies. ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"The defintion of PFTs often includes information on their climatic range and on their phenology, leaf form, or general energy acquisition strategy. For instance, the original PFTs used in BIOME4 are: Tropical Evergreen, Tropical Deciduous, Temperate Broadleaved Evergreen, Temperate Deciduous, Temperate Needleleaf Everegreen, Boreal Evergreen, Boreal Deciduous, Temperate C3 Grass, Tropical/Warm-temperate Grass (C4), Desert Woody (C3 or C4), Tundra Shrub, Cold Herbaceous, Lichen/Forb (Kaplan & Prentice., 2004). However, this list is not finite and could be extended to for example: Epiphytes, CAM Succulents, C4 Forbs, Mangroves, and so on. ","category":"page"},{"location":"pfts/#PFTs-in-the-model","page":"Plant Functional Types","title":"PFTs in the model","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"In this package, we provide you with base PFTs based on Phenology: Deciduous, Evergreen, Grass and Tundra. And with additional traits you could add onto them to compose your own PFT: Broadleaf/Needleleaf, Tropical/Temperate/Boreal. You also can manually modify these traits (see defining your own PFTs). ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"We provide you with 5 base PFTs: 3 trees (evergreen): Temperate, Tropical, Boreal; and 2 Grass-like: Grass and Tundra, and a Default and None with 0/default values. We have initialized them with generic parameters. ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"When running the BIOME4 model, the default PFTs as defined by Kaplan and Prentice (2004) will be used. ","category":"page"},{"location":"pfts/#PFT-traits-in-the-model","page":"Plant Functional Types","title":"PFT traits in the model","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"The model is based on a series traits used to compute the growth of each PFT through photosynthesis, water acquisition, heterotropic respiration, ... ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"phenological_type  \n1.0 – Evergreen  \n2.0 – Deciduous  \n3.0 – Grass  \nmax_min_canopy_conductance (mm s⁻¹)  \ngmin – Plant water loss not directly associated with photosynthesis  \nLinearly related to the maximum daily photosynthesis rate (Schultz et al., 1994; Körner, 1994)\nEmax – Maximum transpiration rate (mm s⁻¹)  \nMaximum daily transpiration possible under well‑watered conditions  \nAssigned a value of 5 mm d⁻¹ based on model performance differences among vegetation classes (guesstimated)\nsw_drop – Soil water content at which stomata start to close\nsw_appear – Soil water content at which stomata start to open\nroot_fraction_top_soil – Fraction of roots in the topsoil layer  \nRooting depths from Haxeltine et al., 1996\nleaf_longevity – Leaf longevity (years)\nGDD5_full_leaf_out – Growing degree days for full leaf‐out above 5 °C\nGDD0_full_leaf_out – Growing degree days for full leaf‐out above 0 °C  \nGDD = ∑(mean daily temperature – minimum temperature for growth)  \nMax. growing‐season LAI:  \n200 for summergreen woody PFTs as per the BIOME3 model (Haxeltine & Prentice., 1996). \n50 for summergreen grasses  \n“Rationale for raingreens” calculated in BIOME3 paper\nsapwood_respiration – Sapwood respiration rate  \nThis value takes 1 or 2. 1 for woody types and 2 for grassy types. \noptratioa – Optimal leaf‐area : sapwood‐area ratio\nkk – Light extinction coefficient\nc4 – C4 photosynthesis flag\nthreshold – LAI : sapwood‐area ratio threshold\nt0 – Reference temperature for growth initiation (°C)\ntcurve – Temperature response curve\nrespfact – Respiration factor  \nEstimated from sapwood respiration rates and reference temperatures\nallocfact – Allocation factor for leaf vs. litter mass  \nRaich & Nadelhoffer, 1989; modified by Sprugel et al., 1996; Ryan, 1991; Runyon et al., 1994\ngrass – Grass functional flag\ndominance factor - the capacity of the PFT to dominate, even in stressful conditions. Values are extracted from the work of Prentice et al., 1992. ","category":"page"},{"location":"pfts/#Ecophysiological-Constraints","page":"Plant Functional Types","title":"Ecophysiological Constraints","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"The model selects viable PFTs for each grid cell based on constraints below (Prentice et al., 1992; Woodward, 1997).","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"tcm – Minimum and maximum temperature for carbon assimilation (°C)\nmin – Minimum temperature for growth (°C)\ngdd – Growing degree days for growth initiation\ngdd0 – Growing degree days for growth initiation at 0 °C\ntwm – Minimum temperature for water limitation (°C)\nsnow – Snow depth for growth initiation (cm)\nswb - Soil water balance. ","category":"page"},{"location":"pfts/#Defining-your-own-PFTs","page":"Plant Functional Types","title":"Defining your own PFTs","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"You can modify individual parameters of your base PFT by doing: ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"C4Grass =  GrassPFT(c4 = true, name = \"C4Grass\")\n\n\nTropicalDeciduous = TropicalPFT(phenological_type = 2)","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"These subtypes will inherit the supertypes of our base PFTs, useful later on in your biome definition ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"typeof(C4Grass)\nGrassPFT{Float64, Int64}\n\ntypeof(TropicalDeciduous)\nTropicalPFT{Float64, Int64}","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"You can also completely define your PFT from the base. For example, here is a WoodyDesert plant from BIOME4: ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"function WoodyDesert()\n    return WoodyDesert{T,U}(\n        PFTCharacteristics{T,U}(\n            \"C3C4WoodyDesert\",\n            1,\n            0.1,\n            1.0,\n            -99.9,\n            -99.9,\n            0.53,\n            12.0,\n            -99.9,\n            -99.9,\n            U(1,\n            0.70,\n            0.3,\n            true,\n            0.33,\n            5.0,\n            1.0,\n            1.4,\n            1.0,\n            false,\n            (\n                tcm=[-Inf, +Inf],\n                min=[-45.0, +Inf],\n                gdd=[500, +Inf],\n                gdd0=[-Inf, +Inf],\n                twm=[10.0, +Inf],\n                snow=[-Inf, +Inf],\n                swb=[-Inf,500]\n            ),\n            (clt=9.2, prec=2.5, temp=23.9),\n            (clt=2.2, prec=2.8, temp=2.7))\n        ).\n        dominance_factor = 5\n    )\nend\n\n\nWoodyDesert() = WoodyDesert()\n","category":"page"},{"location":"pfts/#Modifying-existing-PFTs","page":"Plant Functional Types","title":"Modifying existing PFTs","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"You can also choose to load some of the existing PFT lists and to modify a single parameter at a time. This is very useful for parameter optimization and tuning. A helper function helps you to do so. Below is an example on updating the PFT named \"LichenForb\" from the PFT list for Emax and then for the constraint tcm (temperature of the coldest month).","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"pftlist = BIOME4.PFTClassification()\n\n# Customize using set_characteristic! \nset_characteristic!(pftlist, \"LichenForb\", :Emax, 999999.0)\nset_characteristic!(pftlist, \"LichenForb\", :tcm, [99999.0, Inf])","category":"page"},{"location":"pfts/#References","page":"Plant Functional Types","title":"References","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"Haxeltine, A., & Prentice, I. C. (1996). BIOME3: An equilibrium terrestrial biosphere model based on ecophysiological constraints, resource availability, and competition among plant functional types. Global Biogeochemical Cycles, 10(4), 693–709. https://doi.org/10.1029/96GB02344\nKaplan, J., & Prentice, I. (2001). Geophysical Applications of Vegetation Modeling.\nPrentice, I. C., Cramer, W., Harrison, S. P., Leemans, R., Monserud, R. A., & Solomon, A. M. (1992). Special Paper: A Global Biome Model Based on Plant Physiology and Dominance, Soil Properties and Climate. Journal of Biogeography, 19(2), 117–134. https://doi.org/10.2307/2845499","category":"page"},{"location":"api/#API-Reference","page":"API","title":"API Reference","text":"","category":"section"},{"location":"api/#Climate-Models","page":"API","title":"Climate Models","text":"","category":"section"},{"location":"api/#Biome.run","page":"API","title":"Biome.run","text":"run(m::Union{BIOME4Model, BIOMEDominanceModel, BaseModel}, vars_in::NamedTuple; \npftlist, biome_assignment) where {T<:Real,U<:Int}\n\nExecute the complete mechanistic model simulation for a single grid cell.\n\nThis function orchestrates the entire modeling workflow including: climate data processing, snow dynamics, soil temperature calculation, potential evapotranspiration, phenology, plant functional type constraints, NPP optimization, and biome classification.\n\n\n\n\n\nrun(m::ThornthwaiteModel, vars_in::Vector{Union{T, U}}, args...; kwargs...) where {T <: Real, U <: Int}\n\nCompute Thornthwaite climate classification zones from monthly temperature and precipitation data.\n\nArguments\n\nm::ThornthwaiteModel The model instance (not directly used in this implementation, provided for dispatch).\nvars_in::Vector{Union{T, U}} A length‑28 vector containing:\nElements 1–4: (unused placeholders)\nElements 5–16: twelve monthly mean temperatures (Real values)\nElements 17–28: twelve monthly total precipitations (Real values)\n\nReturns\n\noutput::Vector{Any}   A vector of length 50 (initialized to zeros of type T), where:\noutput[1] is an Int code for the temperature zone:\nTropical  \nMesothermal  \nMicrothermal  \nTaiga  \nTundra  \nFrost  \noutput[2] is an Int code for the moisture zone:\nWet  \nHumid  \nSubhumid  \nSemiarid  \nArid  \nAll other entries remain zero.\n\n\n\n\n\nrun(m::WissmannModel, vars_in::Vector{<:Union{<:Real,<:Int}}, args...; kwargs...)\n\nClassify climate by the Wissmann scheme using 12 months of temperature and precipitation.\n\nArguments\n\nm::WissmannModel   Model instance (for dispatch).\nvars_in::Vector{Union{T,U}}   Length‑28 vector where:\nindices 5–16: monthly mean temperatures\nindices 17–28: monthly precipitation totals\nargs..., kwargs...   Ignored extras.\n\nReturns\n\noutput::Vector{Int} (length 1)   Single-element vector holding the integer code (1–22) of the matched Wissmann zone.\n\nNotes\n\nComputes seasonal totals, mean, min/max temperatures.\nDetermines hemisphere to compare winter vs summer precipitation.\nApplies tiered thresholds for Polar, Boreal, Temperate, and Tropical groups.\n\n\n\n\n\n","category":"function"},{"location":"api/#Mechanistic-Model","page":"API","title":"Mechanistic Model","text":"","category":"section"},{"location":"api/#Base-functions","page":"API","title":"Base functions","text":"","category":"section"},{"location":"api/#Biome.assign_biome","page":"API","title":"Biome.assign_biome","text":"assign_biome(optpft::AbstractNeedleleafEvergreenPFT)\n\nAssign biome for AbstractNeedleleafEvergreenPFT  plant functional type.\n\nReturns NeedleleafEvergreenForest.\n\n\n\n\n\nassign_biome(optpft::BroadleafEvergreenBase)\n\nAssign biome for BroadleafEvergreenBase plant functional type.\n\nReturns BroadleafEvergreenForest.\n\n\n\n\n\nassign_biome(optpft::NeedleleafDeciduousBase)\n\nAssign biome for NeedleleafDeciduousBase plant functional type.\n\nReturns NeedleleafDeciduousForest.\n\n\n\n\n\nassign_biome(optpft::BroadleafDeciduousBase)\n\nAssign biome for BroadleafDeciduousBase plant functional type.\n\nReturns BroadleafDeciduousForest.\n\n\n\n\n\nassign_biome(optpft::AbstractC3GrassPFT)\n\nAssign biome for C3GrassBase plant functional type.\n\nReturns C3Grassland.\n\n\n\n\n\nassign_biome(optpft::AbstractC4GrassPFT)\n\nAssign biome for C4GrassBase plant functional type.\n\nReturns C4Grassland.\n\n\n\n\n\nassign_biome(optpft::Union{None, Default})\n\nAssign biome for None/Default plant functional type.\n\nReturns Desert biomes.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.c4photo","page":"API","title":"Biome.c4photo","text":"c4photo(ratio, dsun, daytime, temp, age, fpar, p, ca, pft)::Tuple{T,T,T}\n\nCalculate C4 photosynthesis based on environmental and plant functional type (PFT) parameters.\n\nArguments:\n\nratio: The ratio of intercellular to ambient CO2 concentration.\ndsun: Daily solar radiation (MJ/m²/day).\ndaytime: Length of the day (hours).\ntemp: Air temperature (°C).\nage: Leaf age (months).\nfpar: Fraction of photosynthetically active radiation absorbed by the canopy.\np: Atmospheric pressure (kPa).\nca: Ambient CO2 concentration (ppm).\npft: Plant Functional Type (integer index).\n\nReturns:\n\nleafresp: Leaf respiration rate.\ngrossphot: Gross photosynthesis rate.\naday: Net daily photosynthesis.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.calcphi","page":"API","title":"Biome.calcphi","text":"calcphi(gpp::AbstractVector{T})::T\n\nCalculate the maximum quantum yield of photosynthesis based on GPP data.\n\nArguments\n\ngpp: An array of 12 T values representing Gross Primary Productivity for each month.\n\nReturns\n\nphi: The calculated maximum quantum yield of photosynthesis.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.constraints","page":"API","title":"Biome.constraints","text":"constraints(tcm, twm, tminin, gdd5, rad0, gdd0, maxdepth, pftlist, pftstates)\n\nCalculate constraints for biome classification based on temperature, GDD, and  other parameters. Sets each PFT’s present flag in states.\n\nArguments\n\ntcm: Temperature of coldest month (°C)\ntwm: Temperature of warmest month (°C)\ntminin: Minimum temperature (°C)\ngdd5: Growing degree days above 5°C\nrad0: Annual radiation (MJ/m²/year)   # (not used here, but kept for interface consistency)\ngdd0: Growing degree days above 0°C\nmaxdepth: Maximum snow depth (mm)\npftlist: List of plant functional types to evaluate\npftstates: Dict mapping each AbstractPFT to its PFTState\n\nReturns\n\ntmin: Adjusted minimum temperature (°C)\npftlist: (unchanged) PFT list\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.competition","page":"API","title":"Biome.competition","text":"BIOME4/BIOMEDominance Competition function.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.daily_interp","page":"API","title":"Biome.daily_interp","text":"daily_interp(mly::Vector{T})\n\nLinearly interpolate the mid-month values (mly) to daily values, modifying dly in place.\n\nArguments\n\nmly: A vector of 12 T values representing mid-month values.\n\nReturns\n\ndly:  A vector of 365T values representing daily interpolated values.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.findnpp","page":"API","title":"Biome.findnpp","text":"findnpp(pft, annp, dtemp, sun, temp, dprec, dmelt, dpet, dayl, k, dphen, co2, p, tsoil)\n\nFind optimal Net Primary Productivity (NPP) for a plant functional type.\n\nThis function runs an NPP optimization model for one PFT by iteratively testing different leaf area index (LAI) values to find the combination that maximizes NPP. Uses a binary search approach to converge on the optimal LAI.\n\nArguments\n\npft: Plant Functional Type to optimize\nannp: Annual precipitation (mm)\ndtemp: Daily temperature array (365 elements, °C)\nsun: Monthly solar radiation array (12 elements, MJ/m²/day)\ntemp: Monthly temperature array (12 elements, °C)\ndprec: Daily precipitation array (365 elements, mm)\ndmelt: Daily snowmelt array (365 elements, mm)\ndpet: Daily potential evapotranspiration array (365 elements, mm)\ndayl: Monthly day length array (12 elements, hours)\nk: Soil and canopy parameter array\ndphen: Daily phenology array (365x2 matrix)\nco2: Atmospheric CO2 concentration (ppm)\np: Atmospheric pressure (kPa)\ntsoil: Monthly soil temperature array (12 elements, °C)\n\nReturns\n\nA tuple containing:\n\npft: The input plant functional type (potentially modified)\noptlai: Optimal leaf area index that maximizes NPP\noptnpp: Maximum net primary productivity achieved (gC/m²/year)\n\nNotes\n\nReturns (pft, 0.0, 0.0) if the PFT is not present in the current conditions\nUses 8 iterations of binary search to converge on optimal LAI\nTests LAI values between 0.01 and 8.0\nCalls the growth() function to calculate NPP for each LAI value\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.fire","page":"API","title":"Biome.fire","text":"fire(wet::AbstractVector{T}, pft::U, lai::T, npp::T)::AbstractPFT\n\nCalculate the number of potential fire days in a year based on threshold values for soil moisture.\n\nArguments\n\nwet: A vector of 365 T values representing daily wetness.\npft: An integer representing the Plant Functional Type (PFT).\nlai: The Leaf Area Index.\nnpp: Net Primary Productivity.\n\nReturns\n\n'pft`: An updated Plant Functional Type (PFT) with the number of fire days set.'\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.growth","page":"API","title":"Biome.growth","text":"growth(maxlai, annp, sun, temp, dprec, dmelt, dpet, k, pft, dayl, dtemp, dphen, co2, p, tsoil, mnpp, c4mnpp)\n\nCalculate net primary productivity and carbon fluxes for a plant functional type.\n\nThis is the main growth function that integrates photosynthesis, respiration, hydrology, and carbon cycling to determine NPP and related carbon fluxes. The function handles both C3 and C4 photosynthesis pathways and includes iterative optimization for photosynthesis-conductance coupling.\n\nArguments\n\nmaxlai: Maximum leaf area index\nannp: Annual precipitation (mm)\nsun: Monthly solar radiation (12 elements, MJ/m²/day)\ntemp: Monthly temperature (12 elements, °C)\ndprec: Daily precipitation (365 elements, mm)\ndmelt: Daily snowmelt (365 elements, mm)\ndpet: Daily potential evapotranspiration (365 elements, mm)\nk: Soil and canopy parameter array\npft: Plant functional type\ndayl: Monthly day length (12 elements, hours)\ndtemp: Daily temperature (365 elements, °C)\ndphen: Daily phenology array (365x2 matrix)\nco2: Atmospheric CO2 concentration (ppm)\np: Atmospheric pressure (kPa)\ntsoil: Monthly soil temperature (12 elements, °C)\nmnpp: Monthly NPP array to be filled (12 elements)\nc4mnpp: Monthly C4 NPP array to be filled (12 elements)\n\nReturns\n\nA tuple containing:\n\nnpp: Annual net primary productivity (gC/m²/year)\nmnpp: Monthly NPP values (12 elements, gC/m²/month)\nc4mnpp: Monthly C4 NPP values (12 elements, gC/m²/month)\n\nNotes\n\nIncludes iterative bisection method for photosynthesis-conductance coupling\nHandles mixed C3/C4 photosynthesis for certain PFTs\nIntegrates fire disturbance effects\nCalculates isotopic signatures for carbon cycling\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.hetresp","page":"API","title":"Biome.hetresp","text":"hetresp(pft, nppann, tair, tsoil, aet, moist, isoveg, Rlit, Rfst, Rslo, Rtot, isoR, isoflux, Rmean, meanKlit, meanKsoil)\n\nModel heterotrophic respiration of litter and soil organic carbon in both a fast and a slow pool. It assumes equilibrium and so decays all of a given year's NPP. The 13C composition of respired CO2 is also modeled.\n\nArguments\n\npft: Plant Functional Type.\nnppann: Annual Net Primary Productivity.\ntair: Array of monthly air temperatures.\ntsoil: Array of monthly soil temperatures.\naet: Array of monthly Actual Evapotranspiration values.\nmoist: Array of monthly soil moisture values.\nisoveg: 13C composition of vegetation.\nRlit: Vector for litter respiration values (modified in place).\nRfst: Vector for fast pool respiration values (modified in place).\nRslo: Vector for slow pool respiration values (modified in place).\nRtot: Vector for total respiration values (modified in place).\nisoR: Vector for isotope respiration values (modified in place).\nisoflux: Vector for isotope flux values (modified in place).\nRmean: Mean respiration value.\nmeanKlit: Mean litter decay constant.\nmeanKsoil: Mean soil decay constant.\n\nReturns\n\nA tuple containing:\n\nRlit: Monthly litter respiration rates (Vector{T}).\nRfst: Monthly fast pool respiration rates (Vector{T}).\nRslo: Monthly slow pool respiration rates (Vector{T}).\nRtot: Monthly total respiration rates (Vector{T}).\nisoR: Monthly isotope respiration values (Vector{T}).\nisoflux: Monthly isotope flux values (Vector{T}).\nRmean: Mean annual respiration rate (T).\nmeanKlit: Mean litter decay constant (T).\nmeanKsoil: Mean soil decay constant (T).\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.hydrology","page":"API","title":"Biome.hydrology","text":"hydrology(dprec, dmelt, deq, root, k, maxfvc, pft, phentype, wst, gcopt, mgmin, dphen, dtemp, sapwood, emax) :: HydrologyResults\n\nCalculate the actual values of canopy conductance (gc), soil moisture, and other hydrological variables.\n\nArguments:\n\ndprec: Daily precipitation (365-element vector).\ndmelt: Daily snowmelt (365-element vector).\ndeq: Daily equilibrium evapotranspiration (365-element vector).\nroot: Root fraction (scalar).\nk: Array of soil and canopy parameters (vector of 7 elements).\nmaxfvc: Maximum foliar vegetation cover (scalar).\npft: Plant Functional Type (scalar).\nphentype: Phenological type (scalar).\nwst: Initial soil moisture (scalar).\ngcopt: Optimal canopy conductance (365-element vector).\nmgmin: Minimum canopy conductance modifier (scalar).\ndphen: Phenology data (365x2 matrix).\ndtemp: Daily temperature (365-element vector).\nsapwood: Presence of sapwood respiration.\nemax: Maximum evapotranspiration efficiency (scalar).\n\nReturns:\n\nmeanfvc: Mean monthly foliar vegetation cover.\nmeangc: Mean monthly canopy conductance.\nmeanwr: Mean monthly soil water reservoir (root zone, layer 1, and layer 2).\nmeanaet: Mean monthly actual evapotranspiration.\nrunoffmonth: Monthly runoff values.\nwet: Daily soil water reservoir values.\ndayfvc: Daily foliar vegetation cover.\nannaet: Annual actual evapotranspiration.\nsumoff: Total runoff and drainage.\ngreendays: Number of days with active vegetation.\nrunnoff: Final runoff value.\nwilt: Boolean indicating whether wilting occurred.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.isotope","page":"API","title":"Biome.isotope","text":"isotope(Cratio, Ca, temp, Rd, c4month, mgpp, phi, gpp)\n\nCalculate the total fractionation of 13C as it goes from free air (as 13CO2) to  fixed carbon in the leaf. For use with the BIOME3 model of A. Haxeltine (1996). There are separate routines for calculating fractionation by both C3 and C4 plants. This program is based upon the model used by Lloyd and Farquhar (1994).\n\nArguments\n\nCratio: Monthly ratios of intercellular to ambient CO2 concentration.\nCa: Ambient CO2 concentration (ppm).\ntemp: Monthly air temperatures (°C).\nRd: Monthly daytime respiration rates (µmol m⁻² s⁻¹).\nc4month: Boolean vector indicating C4 photosynthesis months.\nmgpp: Monthly gross primary productivity values.\nphi: Maximum quantum yield of photosynthesis.\ngpp: Annual gross primary productivity.\n\nReturns\n\nA tuple containing:\n\nmeanC3: Mean C3 isotopic fractionation weighted by GPP.\nmeanC4: Mean C4 isotopic fractionation weighted by GPP.\nC3DA: Monthly C3 isotopic fractionation values.\nC4DA: Monthly C4 isotopic fractionation values.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.phenology","page":"API","title":"Biome.phenology","text":"phenology(dphen, dtemp, temp, tcm, tmin, pft, ddayl)\n\nCalculate a generic phenology for any summergreen plant functional type.\n\nA three month period centered around the coldest month is defined as the  minimum period during which foliage is not present. Plants then start growing  leaves at the end of this 3 month period or when the temperature goes above  5°C if this occurs later. Plants take 200 Growing Degree Days at 5°C (GDD5) to grow a full leaf canopy.\n\nArguments\n\ndphen: Daily phenology array (365x2 matrix) to be modified\ndtemp: Daily temperature array (365 elements, °C)\ntemp: Monthly temperature array (12 elements, °C)\ntcm: Temperature of the coldest month (°C)\ntmin: Minimum temperature (°C)\npft: Plant Functional Type\nddayl: Daily day length array (365 elements, hours)\n\nReturns\n\ndphen: Modified daily phenology array (365x2 matrix)\n\nNotes\n\nPhencase 1: Evergreen Phenology\nPhencase 2: Alternative phenology based on GDD0\nFall leaf drop occurs when temperature < -10°C or day length < 10 hours\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.photosynthesis","page":"API","title":"Biome.photosynthesis","text":"photosynthesis(ratio, dsun, daytime, temp, age, fpar, p, ca, pft)\n\nCalculate C3 photosynthesis based on environmental and plant functional type (PFT) parameters.\n\nArguments\n\nratio: The ratio of intercellular to ambient CO2 concentration.\ndsun: Daily solar radiation (MJ/m²/day).\ndaytime: Length of the day (hours).\ntemp: Air temperature (°C).\nage: Leaf age (months).\nfpar: Fraction of photosynthetically active radiation absorbed by the canopy.\np: Atmospheric pressure (kPa).\nca: Ambient CO2 concentration (ppm).\npft: Plant Functional Type (integer index).\n\nReturns\n\nleafresp: Leaf respiration rate.\ngrossphot: Gross photosynthesis rate.\naday: Net daily photosynthesis.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.ppeett","page":"API","title":"Biome.ppeett","text":"ppeett(lat, dtemp, dclou, temp)\n\nCalculate insolation and potential evapotranspiration (PET) for each month.\n\nThis function computes daily potential evapotranspiration, day length, solar  radiation, and annual radiation based on latitude, temperature, and cloud cover.\n\nArguments\n\nlat: Latitude in degrees\ndtemp: Daily temperature array (365 elements, °C)\ndclou: Daily cloud cover array (365 elements, %)\ntemp: Monthly temperature array (12 elements, °C)\n\nReturns\n\nA tuple containing:\n\ndpet: Daily potential evapotranspiration (365 elements, mm/day)\ndayl: Monthly day length (12 elements, hours)\nsun: Monthly solar radiation (12 elements, MJ/m²/day)\nrad0: Annual radiation sum (MJ/m²/year)\nddayl: Daily day length (365 elements, hours)\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.respiration","page":"API","title":"Biome.respiration","text":"respiration(gpp, alresp, temp, sapwood, lai, monthlyfpar, pft)\n\nCalculate plant respiration components and net primary productivity (NPP) from  gross primary productivity (GPP).\n\nThis function computes various respiration costs including stem maintenance,  belowground maintenance, leaf respiration, and growth respiration to determine  the net primary productivity of a plant functional type.\n\nArguments\n\ngpp: Gross primary productivity (carbon gained through photosynthesis)\nalresp: Autotrophic leaf respiration\ntemp: Monthly temperature array (12 elements)\nsapwood: sapwood indicator (2 = sapwood, other = woody)\nlai: Leaf area index\nmonthlyfpar: Monthly fraction of photosynthetically active radiation  (12 elements)\npft: Plant functional type identifier\n\nReturns\n\nA tuple containing:\n\nnpp: Net primary productivity (-9999.0 if below minimum allocation  requirement)\nstemresp: Total annual stem maintenance respiration\npercentcost: Respiration costs as percentage of GPP\nmstemresp: Monthly stem maintenance respiration (12 elements)\nmrootresp: Monthly root maintenance respiration (12 elements)\nbackleafresp: Monthly leaf maintenance respiration (12 elements)\n\nNotes\n\nFor sapwood PFTs (sapwood == 2), stem respiration is set to zero\nTemperature-dependent respiration follows exponential relationship with  reference temperature of 10°C\nNPP is set to -9999.0 if it falls below the minimum allocation requirement\nFunction uses multiple hardcoded constants that should ideally be moved to a  constants module\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.snow","page":"API","title":"Biome.snow","text":"snow(dtemp, dprecin)\n\nCalculate daily precipitation and snowmelt from daily temperature and  precipitation input. Snow accumulates when temperature is below the snow threshold and melts when temperature is above it.\n\nArguments\n\ndtemp: Daily temperature array (365 elements, °C)\ndprecin: Daily precipitation input array (365 elements, mm)\n\nReturns\n\nA tuple containing:\n\ndprec: Daily precipitation (rain) after accounting for snow (365 elements)\ndmelt: Daily snowmelt (365 elements, mm)\nmaxdepth: Maximum snow depth reached during the year (mm)\n\nNotes\n\nSnow threshold temperature is set to -1.0°C\nMelt coefficient is 0.7 mm/°C/day\nFunction runs twice to ensure equilibrium\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.table","page":"API","title":"Biome.table","text":"table(tc)\n\nExtract Gamma and Lambda based on temperature.\n\nLooks up gamma and lambda from the table based on the given temperature (tc).\n\nAuthor: Wolfgang Cramer, Dept. of Geography, Trondheim University-AVH, N-7055 Dragvoll, Norway. Latest revisions 14/2-1991\n\nArguments\n\ntc: Temperature for which gamma and lambda are looked up.\n\nReturns\n\nTuple{T, T}: gamma and lambda values based on the provided temperature.\n\n\n\n\n\n","category":"function"},{"location":"api/#BIOME4-specific-functions","page":"API","title":"BIOME4-specific functions","text":"","category":"section"},{"location":"api/#Biome.BIOME4.assign_biome","page":"API","title":"Biome.BIOME4.assign_biome","text":"assign_biome(optpft::LichenForb, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for LichenForb plant functional type.\n\nReturns Barren biome as LichenForb typically occurs in harsh environments.\n\n\n\n\n\nassign_biome(optpft::TundraShrubs, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TundraShrubs plant functional type.\n\nUses growing degree days above 0°C to determine tundra biome type.\n\n\n\n\n\nassign_biome(optpft::ColdHerbaceous, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for ColdHerbaceous plant functional type.\n\nReturns SteppeTundra biome for cold herbaceous vegetation.\n\n\n\n\n\nassign_biome(optpft::BorealEvergreen, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for BorealEvergreen plant functional type.\n\nUses GDD5 and coldest month temperature to determine forest type.\n\n\n\n\n\nassign_biome(optpft::BorealDeciduous, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for BorealDeciduous plant functional type.\n\nDetermines forest type based on subordinate PFT and climate conditions.\n\n\n\n\n\nassign_biome(optpft::WoodyDesert, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for WoodyDesert plant functional type.\n\nUses NPP and LAI to determine desert or shrubland biome type.\n\n\n\n\n\nassign_biome(optpft::C3C4TemperateGrass, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for C3C4TemperateGrass plant functional type.\n\nUses NPP and GDD0 to determine grassland or tundra biome type.\n\n\n\n\n\nassign_biome(optpft::TemperateBroadleavedEvergreen, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TemperateBroadleavedEvergreen plant functional type.\n\nUses NPP to determine if mixed forest or desert biome is appropriate.\n\n\n\n\n\nassign_biome(optpft::TemperateDeciduous, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TemperateDeciduous plant functional type.\n\nComplex logic considering co-occurring PFTs and climate conditions.\n\n\n\n\n\nassign_biome(optpft::CoolConifer, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for CoolConifer plant functional type.\n\nDetermines conifer forest type based on co-occurring PFTs.\n\n\n\n\n\nassign_biome(optpft::TropicalEvergreen, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TropicalEvergreen plant functional type.\n\nReturns tropical evergreen forest if NPP is sufficient, otherwise desert.\n\n\n\n\n\nassign_biome(optpft::TropicalDroughtDeciduous, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TropicalDroughtDeciduous plant functional type.\n\nUses NPP and green days to determine tropical forest type.\n\n\n\n\n\nassign_biome(optpft::C4TropicalGrass, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for C4TropicalGrass plant functional type.\n\nReturns tropical grassland if NPP is sufficient, otherwise desert.\n\n\n\n\n\nassign_biome(optpft::Default, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for Default plant functional type.\n\nUses woody dominant PFT to determine appropriate biome type.\n\n\n\n\n\nassign_biome(optpft::None, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for None plant functional type.\n\nReturns Barren biome when no vegetation is present.\n\n\n\n\n\n","category":"function"},{"location":"koppen/#Köppen-Geiger","page":"Koppen-Geiger","title":"Köppen-Geiger","text":"","category":"section"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"The Köppen–Geiger system divides Earth’s climates into five primary groups:A (tropical), B (arid), C (temperate), D (continental) and E (polar).Each group is then further subdivided by patterns of seasonal precipitation and temperature thresholds. This biome classification relies on metrics such as the coldest and warmest monthly mean temperatures, total and driest‑month precipitation, and the relative timing of wet and dry seasons, and outputs subtypes like Af (tropical rainforest), Cfb (oceanic) or BWh (hot desert), each mapped to a unique integer code. ","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"(Image: kg)","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"In the provided Julia implementation, the run function unpacks longitude, latitude, monthly temperature and precipitation from the input vector, computes summary statistics (min, max, mean), sums seasonal precipitation (winter vs. summer based on hemisphere), then applies the Köppen–Geiger decision tree against those thresholds and looks up the resulting symbol in a Dict{Symbol,Int} to produce a numeric climate class, finally returning that class along with the original coordinates.","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"You can call this model using ","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"","category":"page"},{"location":"koppen/#References","page":"Koppen-Geiger","title":"References","text":"","category":"section"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"Köppen, W. Das geographische System der Klimate, 1–44 (Gebrüder Borntraeger: Berlin, Germany, 1936).\nBeck, H., Zimmermann, N., McVicar, T. et al. Present and future Köppen-Geiger climate classification maps at 1-km resolution. Sci Data 5, 180214 (2018). https://doi.org/10.1038/sdata.2018.214","category":"page"},{"location":"biome4/#BIOME4","page":"BIOME4","title":"BIOME4","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"(Image: biome4)","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"We offer to run the BIOME4 model two ways. ","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Based on a exact translation of the fortran model developped by Jed O. Kaplan and for which the source code is available here.\nYou can call this model using \n\nIn so-called dominance-mode where we modified the competition logic.   We based the new rationale on defining the region of highest dominance of each PFT by fitting a gaussian distribution for the climatological inputs: cloud cover, precipitation, and temperature. For each pixel, the pixel value for the variable will be compared to the distribution and the PFT's dominance in this space is then normalized between 0 and 1 depending on how close it is to the highest dominance point.        We then compute dominance as \n ````\n dominance = dominance_environment(PFT, :clt, mean cloud cover of pixel) + dominance_environment(PFT, :temp, mean temperature of pixel) + dominance_environment(PFT, :prec, mean precipitation of pixel)\n ````\n \n Later on, we multiply this dominance value by the NPP of the PFT. \n We then rank all PFTs according to the computed value and the PFT with the highest value will be picked as the dominant/most optimal PFT.\nYou can call this model using \n","category":"page"},{"location":"biome4/#References","page":"BIOME4","title":"References","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Kaplan, J., & Prentice, I. (2001). Geophysical Applications of Vegetation Modeling.","category":"page"},{"location":"examples/#Examples","page":"Examples","title":"Examples","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"Here is some basic examples on how to run the package for different model types. ","category":"page"},{"location":"examples/#Climatological:","page":"Examples","title":"Climatological:","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"using Biome\nusing Rasters\n\ntempfile = \"\"\nprecfile = \"\"\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile, name=\"prec\")\n\nsetup = ModelSetup(KoppenModel;\n                   temp=temp_raster,\n                   prec=prec_raster)\n\nrun!(setup; coordstring=\"alldata\", outfile=\"output_Koppen.nc\")\n","category":"page"},{"location":"examples/#Mechanistics","page":"Examples","title":"Mechanistics","text":"","category":"section"},{"location":"examples/#BIOME4","page":"Examples","title":"BIOME4","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"For the classic BIOME4 model, you don't need to provide a pftlist, the orchestrator will automatically fetch the biome classifications and PFTs.  If you do define PFTs, they will be overwritten by the classic BIOME4 scheme and we suggest you use BaseModel to work with custom PFTs. ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"using Biome\nusing Rasters\n\ntempfile = \"\"\nprecfile = \"\"\ncltfile = \"\"\nsoilfile = \"\"\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile, name=\"prec\")\nclt_raster = Raster(cltfile, name=\"sun\")\nksat_raster = Raster(soilfile, name=\"Ksat\")\nwhc_raster = Raster(soilfile, name=\"whc\")\n\n\nsetup = ModelSetup(BIOME4Model;\n                   temp=temp_raster,\n                   prec=prec_raster,\n                   sun=clt_raster,\n                   ksat=ksat_raster,\n                   whc=whc_raster,\n                   co2=373.8)\n\nrun!(setup; coordstring=\"alldata\", outfile=\"output_biome4.nc\")","category":"page"},{"location":"examples/#Base-Model","page":"Examples","title":"Base Model","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"Without customization. ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"using Biome\nusing Rasters\n\ntempfile = \"\"\nprecfile = \"\"\ncltfile = \"\"\nsoilfile = \"\"\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile, name=\"prec\")\nclt_raster = Raster(cltfile, name=\"sun\")\nksat_raster = Raster(soilfile, name=\"Ksat\")\nwhc_raster = Raster(soilfile, name=\"whc\")\n\n# BasePTS\npftlist = PFTClassification([\n        EvergreenPFT(),\n        DeciduousPFT(),\n        TundraPFT(),\n        GrassPFT(),\n    ]\n)\nsetup = ModelSetup(BaseModel;\n                   temp=temp_raster,\n                   prec=prec_raster,\n                   sun= clt_raster,\n                   ksat=ksat_raster,\n                   whc= whc_raster,\n                   co2=373.8,\n                   pftlist = pftlist)\n\nrun!(setup; coordstring=\"-180/0/-90/90\", outfile=\"output_BaseModel.nc\")","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"Creating 3 new PFTs and their associated biomes","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"using Biome\nusing Rasters\n\ntempfile = \"\"\nprecfile = \"\"\ncltfile = \"\"\nsoilfile = \"\"\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile, name=\"prec\")\nclt_raster = Raster(cltfile, name=\"sun\")\nksat_raster = Raster(soilfile, name=\"Ksat\")\nwhc_raster = Raster(soilfile, name=\"whc\")\n\n# Custom PFTs\nC4Grass = GrassPFT(c4 = true)\n\nTropicalEvergreen = EvergreenPFT(\n    name = \"TropicalEvergreen\",\n    phenological_type = 1,\n    max_min_canopy_conductance = 0.5,\n    Emax = 10.0,\n    root_fraction_top_soil     = 0.69,\n    optratioa                  = 0.95,\n    kk                         = 0.7,\n    t0                         = 10.0,\n    tcurve                     = 1.0,\n    respfact                   = 0.8,\n    allocfact                  = 1.0,\n    constraints = (\n        tcm = [-Inf, +Inf],\n        min = [0.0, +Inf],\n        gdd = [-Inf, +Inf],\n        gdd0 = [-Inf, +Inf],\n        twm = [10.0, +Inf],\n        snow = [-Inf, +Inf],\n        swb = [700.0, +Inf]\n    ),\n    mean_val = (clt=50.2, prec=169.6, temp=24.7),\n    sd_val = (clt=4.9,  prec=41.9,  temp=1.2),\n    dominance_factor = 1\n)\n\nTemperateDeciduous = DeciduousPFT(\n    name = \"TemperateDeciduous\",\n    constraints = (\n        tcm=[-Inf, +Inf],\n        min=[-8.0, 5.0],\n        gdd=[1200, +Inf],\n        gdd0=[-Inf, +Inf],\n        twm=[10.0, +Inf],\n        snow=[-Inf, +Inf],\n        swb=[400,+Inf]\n    ),\n    mean_val = (clt=33.4, prec=106.3, temp=18.7),\n    sd_val = (clt=13.3, prec=83.6,  temp=3.2),\n    dominance_factor = 1\n)\n\nstruct Savanna  <: AbstractBiome\n    value::Int\n    Savanna() = new(6)\n  end\n\nstruct TropicalEvergreenForest <: AbstractBiome\n    value::Int\n    TropicalEvergreenForest() = new(7)\n  end\n\n  struct TemperateDeciduousForest <: AbstractBiome\n    value::Int\n    TemperateDeciduousForest() = new(8)\n  end\n  \n  \nfunction my_biome_assign(pft::AbstractPFT;\n    subpft,\n    wdom,\n    gdd0,\n    gdd5,\n    tcm,\n    tmin,\n    pftlist,\n    PFTStates,\n    gdom)\n    if get_characteristic(pft, :c4)\n        return Savanna()\n    elseif  get_characteristic(pft, :name) == \"TropicalEvergreen\"\n        return TropicalEvergreenForest()\n    elseif get_characteristic(pft, :name) == \"TemperateDeciduous\"\n        return TemperateDeciduousForest()\n    else\n    # FIXME could we make this fallback silent\n        return Biome.assign_biome(pft;\n                subpft=subpft, wdom=wdom,\n                gdd0=gdd0, gdd5=gdd5,\n                tcm=tcm, tmin=tmin,\n                pftlist=pftlist,\n                PFTStates=PFTStates, gdom=gdom)\n    end\nend\n\n\npftlist = PFTClassification([\n        DeciduousPFT(),\n        TundraPFT(),\n        GrassPFT(),\n        C4Grass,\n        TropicalEvergreen,\n        TemperateDeciduous\n    ]\n)\nsetup = ModelSetup(BaseModel;\n                   temp=temp_raster,\n                   prec=prec_raster,\n                   sun= clt_raster,\n                   ksat=ksat_raster,\n                   whc= whc_raster,\n                   co2=373.8,\n                   pftlist = pftlist,\n                   biome_assignment = my_biome_assign)\n\nrun!(setup; coordstring=\"-180/0/-90/90\", outfile=\"output_CustomModel.nc\")","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"Such model output will look like: ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"(Image: custom_output)","category":"page"},{"location":"thornthwaite/#Thornthwaite","page":"Thornthwaite","title":"Thornthwaite","text":"","category":"section"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"The Thornthwaite system (1931 – 1948) classifies climates both by how effectively precipitation meets evaporative demand and by thermal efficiency. ","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"(Image: tw)","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"In our method, twelve monthly temperatures and precipitations are used to compute a precipitation‑effectiveness index (PE) and a thermal‑efficiency index. PE then places the site into one of five moisture zones (Wet, Humid, Subhumid, Semiarid, Arid), and TE into one of six temperature zones (Tropical, Mesothermal, Microthermal, Taiga, Tundra, Frost), each mapped via simple thresholds.","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"You can call this model using ","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"","category":"page"},{"location":"thornthwaite/#References","page":"Thornthwaite","title":"References","text":"","category":"section"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"Thornthwaite, C. W. (1931). The climates of North America: According to a new classification. , 21(4),. JSTOR. Geographical Review, 633–655.","category":"page"},{"location":"wissmann/#Wissmann","page":"Wissmann","title":"Wissmann","text":"","category":"section"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"The Wissmann scheme partitions climates into six major groups (from Tropical through Polar) and within each applies moisture thresholds to distinguish rainforest, monsoonal, steppe and desert subtypes. ","category":"page"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"(Image: wissman)","category":"page"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"In the provided function, the twelve monthly temperatures and precipitations are first summarized (min, max, mean temperatures; total and minimum precipitation; plus seasonal sums for “winter” and “summer” based on hemisphere). A dynamic precipitation threshold (t_threshold) is computed as ten times the mean annual temperature (shifted by +14 °C if summer is wetter than winter). The main classes are applied with thresholds: ","category":"page"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"Polar (Group VI if max < 0 °C; V if max < 10 °C)\nBoreal (Group IV when mean < 4 °C), with four moisture classes (IVF humid, IVT winter‑dry, IVS steppe, IVD desert) based on precipitation relative to 1×, 2×, or 2.5× t_threshold\nCool temperate (Group III when min < 2 °C), with analogous moisture splits and a winter‑vs‑summer dry distinction for the Ts/Tw subtypes\nWarm temperate (Group II when 2 °C ≤ min < 13 °C), where hot summers (max > 23 °C) get the Fa vs. Fb humid subtype, and Ts/Tw or IS/ID for intermediate and arid regimes\nTropical (Group I when min ≥ 13 °C), where a driest‐month check (precip_min ≥ 60 mm) yields the equatorial IA rainforest type, otherwise IF (weak dry period), IT (monsoonal), IS (savanna) or ID (desert) by the same 1‒2.5 × threshold bins.","category":"page"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"You can call this model using ","category":"page"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"","category":"page"},{"location":"wissmann/#References","page":"Wissmann","title":"References","text":"","category":"section"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"Wissmann, H. (1939). In Die Klima-und Vegetationsgebiete Eurasiens: Begleitworte zu einer Karte der Klimagebiete Eurasiens. (pp. 81–92). Erdk. Berlin.","category":"page"},{"location":"#Biome.jl-a-modular-framework-of-climate-based-biome-prediction.","page":"Home","title":"Biome.jl a modular framework of climate-based biome prediction.","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Welcome to the documentation of Biome.jl. ","category":"page"},{"location":"","page":"Home","title":"Home","text":"This package provides a platform for simulating climate-driven biome classification schemes alongside the mechanistic model BIOME4 and a modular version based on the BIOME4 logic.","category":"page"},{"location":"#Features","page":"Home","title":"Features","text":"","category":"section"},{"location":"#Examples","page":"Home","title":"Examples","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"(Image: examples)(Image: example2)","category":"page"},{"location":"#Credits","page":"Home","title":"Credits","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The following people are involved in the development of Biome.jl ","category":"page"},{"location":"","page":"Home","title":"Home","text":"Capucine Lechartre - Main development \nVictor Boussange - Code architecture\nNiklaus Zimmermann - Theoretical development\nPhilipp Brun - Theoretical development","category":"page"},{"location":"","page":"Home","title":"Home","text":"All contributors are affiliated with the Swiss Federal Institute for Forest, Snow, and Landscape Research WSL","category":"page"}]
}
