var documenterSearchIndex = {"docs":
[{"location":"contributing/#Contributing-to-Biome.jl","page":"Contributing","title":"Contributing to Biome.jl","text":"","category":"section"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"üå± Thanks for your interest in contributing!","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"Biome.jl welcomes bug reports, feature requests, documentation fixes, and crucially: new PFT (Plant Functional Type) definitions for our community-maintained PFT database.","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"This page explains the different ways you can help, how to open Issues and Pull Requests (PRs), our development workflow, and how to contribute PFTs.","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"","category":"page"},{"location":"contributing/#Ways-to-contribute","page":"Contributing","title":"Ways to contribute","text":"","category":"section"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"Report bugs and propose enhancements via [Issues].\nImprove documentation (typos, examples, tutorials).\nAdd or refine tests to increase reliability.\nPerformance: profiling and optimizing hot paths.\nAdd PFTs to our shared PFT database (see below).\nAdd new biome schemes or improve plotting/IO utilities.","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"","category":"page"},{"location":"contributing/#Community-guidelines","page":"Contributing","title":"Community guidelines","text":"","category":"section"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"Be respectful and constructive.\nPrefer public discussions (Issues / PRs) so others can learn too.\nAsk questions: early‚Äîmaintainers are happy to help with scope and design.","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"","category":"page"},{"location":"contributing/#Opening-an-Issue","page":"Contributing","title":"Opening an Issue","text":"","category":"section"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"Before filing a new issue, please:","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"Search existing issues to avoid duplicates.\nInclude:\nA clear title and minimal reproducible example (if applicable).\nExpected vs. actual behavior.\nEnvironment details (Julia version, OS, package versions).\nFor performance issues: timing info, data sizes, and a short profile if possible.","category":"page"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"","category":"page"},{"location":"contributing/#Pull-Request-(PR)-workflow","page":"Contributing","title":"Pull Request (PR) workflow","text":"","category":"section"},{"location":"contributing/","page":"Contributing","title":"Contributing","text":"Fork the repo and create a feature branch: bash git checkout -b yourname/short-feature-name`\nMake focused changes and add tests. Keep PRs small if possible.\nRun tests locally.\nDocument any new user-facing features in the docs.\nOpen the PR\nCheck the CI status and address review comments.","category":"page"},{"location":"install/#Installing-the-package","page":"Installing the package","title":"Installing the package","text":"","category":"section"},{"location":"data/#Data","page":"Data","title":"Data","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"This user guide describes the basic structures and functions to run the base models provided in the package, and define your biome schemes and run them.","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"","category":"page"},{"location":"data/#Requirements-in-input-data","page":"Data","title":"Requirements in input data","text":"","category":"section"},{"location":"data/#Climatological-and-soil-input","page":"Data","title":"Climatological and soil input","text":"","category":"section"},{"location":"data/#1)-Climatological-data","page":"Data","title":"1) Climatological data","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"The climatological variables‚Äîtemperature, tmin, cloud cover, and precipitation‚Äîare downloaded from the CHELSA database.   Each variable is available per month for a specified year. In addition to yearly data, CHELSA also provides multi-year climatologies (averaged datasets over longer time periods).","category":"page"},{"location":"data/#2)-Soil-characteristics-data","page":"Data","title":"2) Soil characteristics data","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"Soil characteristics are generated using the makesoil module from ARVE Research.   This script produces a NetCDF file with the two variables required by BIOME4:","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"whc ‚Äî soil water-holding capacity  \nKsat ‚Äî soil saturated conductivity","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"","category":"page"},{"location":"data/#Climate-envelope-models","page":"Data","title":"Climate envelope models","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"The climate envelope models here are a Julia re-implementation of the CHELSA module for mapping climatologies at high resolutions   (see: CHELSA 1-km K√∂ppen-Geiger and the original SAGA tool:   climatetools19).","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"Inputs:","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"Thornthwaite, TrollPfaffen, Wissmann\nTemperature climatologies\nPrecipitation climatologies\nK√∂ppen‚ÄìGeiger\nTemperature climatologies\nPrecipitation climatologies\nLatitude and longitude information (for seasonal partitioning/hemisphere logic)","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"","category":"page"},{"location":"data/#Mechanistic-models","page":"Data","title":"Mechanistic models","text":"","category":"section"},{"location":"data/","page":"Data","title":"Data","text":"The BIOME4 model and other PFT-based frameworks require the following gridded inputs:","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"Climatological monthly mean temperature (¬∞C)\nClimatological monthly mean cloud cover (%)\nClimatological monthly total precipitation (mm)\nSoil water-holding capacity in two or more layers (mm/mm)\nSoil saturated conductivity in two or more layers (mm/h)","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"BIOME4 also requires a single global value for atmospheric CO‚ÇÇ concentration.","category":"page"},{"location":"data/","page":"Data","title":"Data","text":"","category":"page"},{"location":"trollpfaffen/#Troll-Pfaffen","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"","category":"section"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"The Troll‚ÄìPaffen scheme partitions Earth‚Äôs climates into 38 seasonal‚Äëinterference types based on the interaction of three ‚Äúseasonal climates‚Äù: illumination (astronomic insolation seasons), temperature (thermic seasons) and moisture (hygric seasons) and outputs zones from polar ice‚Äëdeserts through tropical rain‚Äëforest ","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"<figure>   <img src=\"assets/outputtrollpfaffenexample.svg\" alt=\"Example Troll‚ÄìPaffen climate regions\" width=\"100%\">   <figcaption><strong>Figure.</strong> Example Troll‚ÄìPaffen classification map.</figcaption> </figure>","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"The following classes can be attributed:","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"Code Class\n1 Polar ice-deserts\n2 Polar frost-debris belt\n3 Tundra\n4 Sub-polar tussock grassland and moors\n5 Oceanic humid coniferous woods\n6 Continental coniferous woods\n7 Highly continental dry coniferous woods\n8 Evergreen broad-leaved and mixed woods\n9 Oceanic deciduous broad-leaved and mixed woods\n10 Sub-oceanic deciduous broad-leaved and mixed woods\n11 Sub-continental deciduous broad-leaved and mixed woods\n12 Continental deciduous broad-leaved and mixed woods as well as wooded steppe\n13 Highly continental deciduous broad-leaved and mixed woods as well as wooded steppe\n14 Deciduous broad-leaved and mixed wood and wooded steppe\n15 Thermophile dry wood and wooded steppe\n16 Humid deciduous broad-leaved and mixed wood\n17 High grass-steppe with perennial herbs\n18 Humid steppe with mild winters\n19 Short grass-, dwarf shrub-, or thorn-steppe\n20 Steppe with short grass, dwarf shrubs and thorns\n21 Central and East-Asian grass and dwarf shrub steppe\n22 Semi-desert and desert with cold winters\n23 Semi-desert and desert with mild winters\n24 Sub-tropical hard-leaved and coniferous wood\n25 Sub-tropical grass and shrub-steppe\n26 Sub-tropical thorn- and succulents-steppe\n27 Sub-tropical steppe with short grass\n28 Sub-tropical semi-deserts and deserts\n29 Sub-tropical high-grassland\n30 Sub-tropical humid forests\n31 Evergreen tropical rain forest\n32 Rain-green humid forest\n33 Half-deciduous transition wood\n34 Rain-green dry wood and savannah\n35 Tropical thorn-succulent wood and savannah\n36 Tropical dry climates with humid months in winter\n37 Tropical semi-deserts and deserts\n38 Not Classified / NA","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"In the provided implementation, twelve monthly temperatures and precipitations are first reduced to statistics (min, max, mean, range, annual total), as well as derived metrics‚Äîgrowing‚Äëdegree days above 5‚ÄØ¬∞C and the average number of humid months where daily rainfall exceeds twice daily temperature (via getgrowingdegreedays and gethumidmonths). A decision tree then applies Troll‚ÄìPaffen thresholds (e.g. tempmax <‚ÄØ0‚ÄØ¬∞C ‚Üí ‚ÄúPolar ice‚Äëdesert‚Äù, ranges of growing‚Äëdegree days and humid‚Äëmonth counts for boreal, temperate, steppe, subtropical and tropical belts, with hemisphere‚Äëadjusted seasonal humidity criteria).","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"You can call this model using: ","category":"page"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"using Biome\nusing Rasters\n\n# Minimal inputs (Troll‚ÄìPaffen uses temp & precip in the driver)\ntempfile = \"/path/to/temp.nc\"   # monthly mean temperature (stacked in 3rd dim)\nprecfile = \"/path/to/prec.nc\"   # monthly precipitation (same grid/stacking)\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile,  name=\"prec\")\n\nsetup = ModelSetup(TrollPfaffenModel();\n                   temp=temp_raster,\n                   prec=prec_raster)\n\n# Process full grid (or pass \"lonmin/lonmax/latmin/latmax\")\nrun!(setup; coordstring=\"alldata\", outfile=\"output_TrollPfaffen.nc\")","category":"page"},{"location":"trollpfaffen/#References","page":"Troll-Pfaffen","title":"References","text":"","category":"section"},{"location":"trollpfaffen/","page":"Troll-Pfaffen","title":"Troll-Pfaffen","text":"Troll, C. (1964). Karte der Jahreszeiten-Klimate der Erde. ERDKUNDE, 18(1), Article 1. https://doi.org/10.3112/erdkunde.1964.01.02","category":"page"},{"location":"biomes/#Defining-New-Biomes","page":"Biomes","title":"Defining New Biomes","text":"","category":"section"},{"location":"biomes/#The-biome-concept","page":"Biomes","title":"The biome concept","text":"","category":"section"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"Biomes are large-scale ecosystems that occupy subcontinental to continental areas (or occur as complexes of smaller patches) and integrate characteristic plant and animal communities. They are shaped by macroclimate, soils, water availability, and disturbance regimes, and are generally recognizable by their vegetation physiognomy (dominant life forms and structure).","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"The biome concept has deep roots in both ecology and biogeography. Its foundations include:","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"Precursors: early ideas such as formation (Grisebach, 1838), life zones (Merriam, 1894), and Schimper‚Äôs climatic template (1898).\nClimatic and edaphic zonality: macroclimate and soils as primary drivers of global vegetation patterns (Schimper, Dokuchaev, Walter).\nPhysiognomy: vegetation form and structure as a unifying comparative tool across regions.\nFunctional and evolutionary perspectives: biomes as dynamic entities assembled by ecological processes and evolutionary history, acting as ‚Äútheatres of evolution‚Äù where species and traits are filtered and reshaped.","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"","category":"page"},{"location":"biomes/#Biomes-in-the-model","page":"Biomes","title":"Biomes in the model","text":"","category":"section"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"In the model, biomes are defined through a few driving elements:","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"The dominant PFT\nThe subdominant PFT\nThe dominant woody type (may equal the dominant PFT)\nThe dominant grassy type","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"Along with key environmental variables:","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"GDD0 and GDD5\nTemperature of the coldest month (TCM)\nAbsolute minimum temperature (Tmin)","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"","category":"page"},{"location":"biomes/#Defining-your-own-biomes","page":"Biomes","title":"Defining your own biomes","text":"","category":"section"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"You can define any rule base that links PFTs to a biome. The only requirement is a PFT. First, define the biome types themselves: give each a name and a numeric value (useful for encoding outputs and plotting).","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"struct Savanna <: AbstractBiome\n    value::Int\n    Savanna() = new(6)\nend\n\nstruct TropicalEvergreenForest <: AbstractBiome\n    value::Int\n    TropicalEvergreenForest() = new(7)\nend\n\nstruct TemperateDeciduousForest <: AbstractBiome\n    value::Int\n    TemperateDeciduousForest() = new(8)\nend\n````\nIn the example below, we assign:\n\n* Savanna when the dominant PFT is C4,\n* Tropical Evergreen Forest if the PFT is TropicalEvergreen,\n* Temperate Deciduous Forest for Temperate Deciduous.\n\nOtherwise, we fall back to the default `Biome.assign_biome` logic.\n","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"julia  function mybiomeassign(pft::AbstractPFT;     subpft,     wdom,     gdd0,     gdd5,     tcm,     tmin,     pftlist,     pftstates,     gdom)","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"if get_characteristic(pft, :c4)\n    return Savanna()\nelseif get_characteristic(pft, :name) == \"TropicalEvergreen\"\n    return TropicalEvergreenForest()\nelseif get_characteristic(pft, :name) == \"TemperateDeciduous\"\n    return TemperateDeciduousForest()\nelse\n    # Fallback to the package's default biome assignment\n    return Biome.assign_biome(pft;\n        subpft=subpft, wdom=wdom,\n        gdd0=gdd0, gdd5=gdd5,\n        tcm=tcm, tmin=tmin,\n        pftlist=pftlist,\n        pftstates=pftstates, gdom=gdom)\nend","category":"page"},{"location":"biomes/","page":"Biomes","title":"Biomes","text":"end ```","category":"page"},{"location":"model-setup/#Model-Setup-‚Äî-BiomeDriver","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"This guide shows how to configure and run BiomeDriver.ModelSetup for different model types (Base/BIOME4, Dominance, and climate classification models), what inputs are required, and what outputs to expect.","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Works with: Biome (models + PFTs) and Rasters (IO & grids)","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"","category":"page"},{"location":"model-setup/#1)-Quick-start","page":"Model Setup ‚Äî BiomeDriver","title":"1) Quick start","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"using Biome\nusing Rasters\n\n# Load rasters\ntemp_r = Raster(\"/path/to/temp.nc\", name=\"temp\")\nprec_r = Raster(\"/path/to/prec.nc\", name=\"prec\")\n\n# Minimal example (K√∂ppen model)\nsetup = ModelSetup(KoppenModel(); temp=temp_r, prec=prec_r)\nrun!(setup; coordstring=\"alldata\", outfile=\"output_Koppen.nc\")","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"","category":"page"},{"location":"model-setup/#2)-What-ModelSetup-does","page":"Model Setup ‚Äî BiomeDriver","title":"2) What ModelSetup does","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"ModelSetup holds everything needed to run a model on a grid:","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"model::BiomeModel ‚Äî which model you want to run (e.g., BaseModel(), BIOMEDominanceModel(), KoppenModel())\nlon, lat ‚Äî coordinates auto-extracted from your temp raster\nco2::Real ‚Äî atmospheric CO‚ÇÇ (optional, only used in the mechanistic models; defaults to 378.0)\nrasters::NamedTuple ‚Äî your environmental inputs (any keyword set to a Raster)\npftlist ‚Äî a PFTClassification or BIOME4.PFTClassification (optional, only used in the mechanistic models; default depends on model)\nbiome_assignment::Function ‚Äî override biome mapping (optional)\nint_type, float_type ‚Äî numeric types (optional)","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"The driver slices the domain (using coordstring), processes in chunks, resumes from an existing NetCDF if found, and writes outputs per model schema.","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Provide coordstring in a lon/lat system with lonmin/lonmax/latmin/latmax between -180/180/-90/90.","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"","category":"page"},{"location":"model-setup/#3)-Required-inputs-by-model","page":"Model Setup ‚Äî BiomeDriver","title":"3) Required inputs by model","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"All rasters must share the same grid, ordering, and resolution. Missing values are unified to -9999.0 internally.","category":"page"},{"location":"model-setup/#A)-Base-/-BIOME4-family","page":"Model Setup ‚Äî BiomeDriver","title":"A) Base / BIOME4 family","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"BaseModel, BIOME4Model, BIOMEDominanceModel","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Required:","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"temp (Raster) ‚Äî temperature climatology (time or monthly band last dim)\nprec (Raster) ‚Äî precipitation climatology","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Common optional (model- or PFT-dependent):","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"clt or sun (cloudiness or sunshine)\nksat (saturated hydraulic conductivity)\nwhc (water holding capacity)\nother custom covariates (e.g., tmin, gdd0, maxdepth, ‚Ä¶)","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Units: ensure inputs make biophysical sense for your PFT rules. You can transform units prior to setup, e.g.:","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"# Example: scale precipitation √ó10, invert sunshine to cloudiness\n# In this example, we make sure we do not transform the NoValueData -9999\nprec_r .= ifelse.(coalesce.(prec_r, -9999) .!= -9999, 10 .* coalesce.(prec_r, -9999), -9999)\ncloud_r .= ifelse.(coalesce.(sun_r, -9999) .!= -9999, 100 .- coalesce!(sun_r, -9999), -9999)","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"CO‚ÇÇ: co2 value as a Float (e.g., 373.8, 324.0).","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"PFT list:","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"If omitted:\nWill default to BIOME4.PFTClassification() \nCan pass a custom PFTClassification([...]) initialized with PFTs","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Outputs created:","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"biome (Int16, dims: lon,lat)\noptpft (Int16, dims: lon,lat)\nnpp (Float64, dims: lon,lat,pft) ‚Äî size num_pfts + 1","category":"page"},{"location":"model-setup/#B)-Climate-classification-models","page":"Model Setup ‚Äî BiomeDriver","title":"B) Climate classification models","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"WissmannModel, KoppenModel, ThornthwaiteModel, TrollPfaffenModel","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Required:","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"temp (Raster)\nprec (Raster)","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Outputs:","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"WissmannModel ‚Üí climate_zone (lon,lat)\nKoppenModel ‚Üí koppen_class (lon,lat)\nThornthwaiteModel ‚Üí temperature_zone, moisture_zone (lon,lat)\nTrollPfaffenModel ‚Üí troll_zone (lon,lat)","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"","category":"page"},{"location":"model-setup/#4)-Input-raster-expectations","page":"Model Setup ‚Äî BiomeDriver","title":"4) Input raster expectations","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Require climatologies for environmental inputs. The inputs should be of dimensions [X, Y, 12].\nDimensions are taken from the temp raster to build lon and lat; all rasters must align exactly.\nUse name=\"varname\" when loading to set the key (e.g., name=\"temp\").\nMissing values: Anything missing is converted to -9999.0.","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"","category":"page"},{"location":"model-setup/#5)-Selecting-the-domain-(coordstring)","page":"Model Setup ‚Äî BiomeDriver","title":"5) Selecting the domain (coordstring)","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"Use \"alldata\" to process the full grid (default).\nOr pass \"lon_min/lon_max/lat_min/lat_max\" (e.g., \"-180/0/-90/90\").\nThe driver maps those to array indices even if latitude is descending.","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"run!(setup; coordstring=\"-180/0/-90/90\", outfile=\"subset.nc\")","category":"page"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"","category":"page"},{"location":"model-setup/#6)-Examples-Base-model-with-custom-PFT-constraints-and-biome-assignment","page":"Model Setup ‚Äî BiomeDriver","title":"6) Examples Base model with custom PFT constraints and biome assignment","text":"","category":"section"},{"location":"model-setup/","page":"Model Setup ‚Äî BiomeDriver","title":"Model Setup ‚Äî BiomeDriver","text":"using Biome, Rasters\n\n# Load\ntemp_r = Raster(\".../temp_1981-2010.nc\", name=\"temp\")\nprec_r = Raster(\".../prec_1981-2010.nc\", name=\"prec\")\nclt_r  = Raster(\".../sun_1981-2010.nc\",  name=\"sun\")\nksat_r = Raster(\".../soils_55km.nc\",      name=\"Ksat\")\nwhc_r  = Raster(\".../soils_55km.nc\",      name=\"whc\")\n\n# Optional extra covariate\ntest_r = Raster(\".../temp_1981-2010.nc\", name=\"temp\")[:, :, 1]  # single-band example\n\n# Define PFT list and constraints\npfts = PFTClassification([\n    NeedleleafEvergreenPFT(), BroadleafEvergreenPFT(),\n    NeedleleafDeciduousPFT(), BroadleafDeciduousPFT(),\n    C3GrassPFT(), C4GrassPFT()\n])\nadd_constraint!(pfts.pft_list[1], :test, (-5.0, 10.0))\nadd_constraint!(pfts.pft_list[2], :test, (0.0, 5.0))\n# ...\n\n# (Optional) custom biome mapping\nfunction my_biome_assign(pft::AbstractPFT; subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist, pftstates, gdom)\n    # Example overrides then fallback\n    if get_characteristic(pft, :c4)\n        return Savanna()  # your custom biome type\n    else\n        return Biome.assign_biome(pft; subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist, pftstates, gdom)\n    end\nend\n\nsetup = ModelSetup(BaseModel();\n    temp=temp_r, prec=prec_r, clt=clt_r, ksat=ksat_r, whc=whc_r,\n    test=test_r, co2=373.8, pftlist=pfts, biome_assignment=my_biome_assign)\n\nrun!(setup; coordstring=\"-180/0/-90/90\", outfile=\"output_BaseModel.nc\")","category":"page"},{"location":"pfts/#Plant-functional-types","page":"Plant Functional Types","title":"Plant functional types","text":"","category":"section"},{"location":"pfts/#The-PFT-concept","page":"Plant Functional Types","title":"The PFT concept","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"Plant functional types (PFTs) are the basis of the mechanical schemes. Instead of defining individual species, which tend to be restricted to a single area of the globe, or not extensively studied, using PFTs allows to generalize life forms and strategies.","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"The defintion of PFTs often includes information on their climatic range and on their phenology, leaf form, or general energy acquisition strategy. ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"For instance, the original PFTs used in BIOME4 are: Tropical Evergreen, Tropical Deciduous, Temperate Broadleaved Evergreen, Temperate Deciduous, Temperate Needleleaf Everegreen, Boreal Evergreen, Boreal Deciduous, Temperate C3 Grass, Tropical/Warm-temperate Grass (C4), Desert Woody (C3 or C4), Tundra Shrub, Cold Herbaceous, Lichen/Forb (Kaplan & Prentice., 2004).","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"However, this list is not finite and could be extended to for example: Epiphytes, CAM Succulents, C4 Forbs, Mangroves, and so on.","category":"page"},{"location":"pfts/#PFTs-in-the-model","page":"Plant Functional Types","title":"PFTs in the model","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"In this package, we provide you with base PFTs based on Phenology: ","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"Broadleaf Evergreen\nBroadleaf Deciduous\nNeedleleaf Evergreen\nNeedleleaf Decidous\nC3 Grass\nC4 Grass","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"We have initialized them with generic parameters. You also can manually modify these traits (see defining your own PFTs).","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"When running the BIOME4 model, the default PFTs as defined by Kaplan and Prentice (2001) will be used.","category":"page"},{"location":"pfts/#PFT-traits-in-the-model","page":"Plant Functional Types","title":"PFT traits in the model","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"The model is based on a series traits used to compute the growth of each PFT through three main processes (Hallgren & Pitman, 2001):","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"photosynthesis\nevaopotranspiration\nroot distribution","category":"page"},{"location":"pfts/#Ecophysiological-traits","page":"Plant Functional Types","title":"Ecophysiological traits","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"Parameter Category Description Min Max Source\nkk Photosynthesis Light extinction coefficient 0.3 0.7 Larcher (1995)\nc4 Photosynthesis C4 photosynthesis flag (true = C4, false = C3) Bool Bool -\noptratioa (C3) Photosynthesis Optimal Ci/Ca ratio for C3 0.5 0.6 Haxeltine et al. (1996)\noptratioa (C4) Photosynthesis Optimal Ci/Ca ratio for C4 0.31 0.4 Wong et al. (1979), Collatz et al. (1992)\nsw_drop Photosynthesis Soil water content at which stomata start to close - - Not specified\nsw_appear Photosynthesis Soil water content at which stomata start to open - - Not specified\nmax_min_canopy_conductance Evapotranspiration Min/max canopy conductance (mm‚ÄØs‚Åª¬π), related to photosynthesis 2.5 20 Monteith (1995)\nEmax Evapotranspiration Maximum daily transpiration under well-watered conditions (mm‚ÄØs‚Åª¬π) 2.4 6.4 Whitehead et al. (1993); Stewart & Gay (1989)\nsapwood_respiration Respiration Sapwood respiration type (1 = woody, 2 = grass) 1 2 -\nrespfact Respiration Sapwood maintenance respiration (g‚ÄØC‚ÄØkg‚Åª¬π‚ÄØmonth‚Åª¬π) 1.3 2.0 -\nphenological_type General Phenology type: 1 = Evergreen; 2 = Deciduous; 3 = Grass 1 3 -\nroot_fraction_top_soil General Fraction of roots in topsoil layer - - Haxeltine et al. (1996)\nleaf_longevity General Leaf longevity (years) 0.5 7 Hallgren & Pitman (2001)\nGDD5_full_leaf_out General Growing degree days above 5‚ÄØ¬∞C for full leaf-out 50 200 Haxeltine & Prentice (1996)\nGDD0_full_leaf_out General Growing degree days above 0‚ÄØ¬∞C for full leaf-out - - -\nthreshold General LAI\\:sapwood-area threshold 0.01 0.2 Hallgren & Pitman (2001)\nt0 General Reference temperature for growth initiation (¬∞C) - - -\ntcurve General Temperature response curve - - -\nallocfact General Allocation factor for leaf vs litter mass - - Raich & Nadelhoffer (1989)\ngrass General Grass flag (true = grass functional type) Bool Bool -\ndominance_factor General Capacity to dominate in harsh conditions 1 10 Prentice et al. (1992)","category":"page"},{"location":"pfts/#Climatic-Constraints","page":"Plant Functional Types","title":"Climatic Constraints","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"Parameter Description Min Max Source\ntcm Min/max temperature of coldest month (¬∞C) -65 +15 Hallgren & Pitman (2001), Table 2\nmin Minimum temperature for growth (¬∞C) -45 +5 Haxeltine et al. (1996)\ngdd GDD for growth initiation (base unspecified) 300 1800 Hallgren & Pitman (2001)\ngdd0 GDD for growth initiation above 0‚ÄØ¬∞C 500 2000 Hallgren & Pitman (2001)\ntwm Temperature for water limitation growth cutoff (¬∞C) 0 15 Hallgren & Pitman (2001)\nsnow Snow depth required for growth (cm) 0 100 Hallgren & Pitman (2001)\nswb Soil water balance (mm) 0 2000 Added in this iteration of the model","category":"page"},{"location":"pfts/#Defining-your-own-PFTs","page":"Plant Functional Types","title":"Defining your own PFTs","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"You can modify individual parameters of your base PFT by doing:","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"C4Grass =  GrassPFT(c4 = true, name = \"C4Grass\")\n\nTropicalDeciduous = TropicalPFT(phenological_type = 2)","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"These subtypes will inherit the supertypes of our base PFTs, useful later on in your biome definition","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"typeof(C4Grass)\n#=> GrassPFT{Float64, Int64}\n\ntypeof(TropicalDeciduous)\n#=> TropicalPFT{Float64, Int64}","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"You can also completely define your PFT from the base. For example, here is a WoodyDesert plant from BIOME4:","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"function WoodyDesert()\n    return WoodyDesert{T,U}(\n        PFTCharacteristics{T,U}(\n            \"C3C4WoodyDesert\",\n            1,\n            0.1,\n            1.0,\n            -99.9,\n            -99.9,\n            0.53,\n            12.0,\n            -99.9,\n            -99.9,\n            U(1,\n            0.70,\n            0.3,\n            true,\n            0.33,\n            5.0,\n            1.0,\n            1.4,\n            1.0,\n            false,\n            (\n                tcm=[-Inf, +Inf],\n                min=[-45.0, +Inf],\n                gdd=[500, +Inf],\n                gdd0=[-Inf, +Inf],\n                twm=[10.0, +Inf],\n                snow=[-Inf, +Inf],\n                swb=[-Inf,500]\n            ),\n            (clt=9.2, prec=2.5, temp=23.9),\n            (clt=2.2, prec=2.8, temp=2.7))\n        ).\n        dominance_factor = 5\n    )\nend\n\nWoodyDesert() = WoodyDesert()","category":"page"},{"location":"pfts/#Modifying-existing-PFTs","page":"Plant Functional Types","title":"Modifying existing PFTs","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"You can also choose to load some of the existing PFT lists and to modify a single parameter at a time. This is very useful for parameter optimization and tuning. A helper function helps you to do so. Below is an example on updating the PFT named \"LichenForb\" from the PFT list for Emax and then for the constraint tcm (temperature of the coldest month).","category":"page"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"pftlist = BIOME4.PFTClassification()\n\n# Customize using set_characteristic!\nset_characteristic!(pftlist, \"LichenForb\", :Emax, 999999.0)\nset_characteristic!(pftlist, \"LichenForb\", :tcm, [99999.0, Inf])","category":"page"},{"location":"pfts/#References","page":"Plant Functional Types","title":"References","text":"","category":"section"},{"location":"pfts/","page":"Plant Functional Types","title":"Plant Functional Types","text":"Hallgren, Willow & Pitman, AJ. (2001). The uncertainty in simulations by a Global Biome Model (BIOMES) to alternative parameter values. Global Change Biology. 6. 483 - 495. 10.1046/j.1365-2486.2000.00325.x.\nHaxeltine, A., & Prentice, I. C. (1996). BIOME3: An equilibrium terrestrial biosphere model based on ecophysiological constraints, resource availability, and competition among plant functional types. Global Biogeochemical Cycles, 10(4), 693‚Äì709. https://doi.org/10.1029/96GB02344\nKaplan, J., & Prentice, I. (2001). Geophysical Applications of Vegetation Modeling.\nPrentice, I. C., Cramer, W., Harrison, S. P., Leemans, R., Monserud, R. A., & Solomon, A. M. (1992). Special Paper: A Global Biome Model Based on Plant Physiology and Dominance, Soil Properties and Climate. Journal of Biogeography, 19(2), 117‚Äì134. https://doi.org/10.2307/2845499","category":"page"},{"location":"api/#API-Reference","page":"API","title":"API Reference","text":"","category":"section"},{"location":"api/#Climate-Models","page":"API","title":"Climate Models","text":"","category":"section"},{"location":"api/#Biome.run","page":"API","title":"Biome.run","text":"run(m::Union{BIOME4Model, BIOMEDominanceModel, BaseModel}, vars_in::NamedTuple; \npftlist, biome_assignment) where {T<:Real,U<:Int}\n\nExecute the complete mechanistic model simulation for a single grid cell.\n\nThis function orchestrates the entire modeling workflow including: climate data processing, snow dynamics, soil temperature calculation, potential evapotranspiration, phenology, plant functional type constraints, NPP optimization, and biome classification.\n\n\n\n\n\nrun(m::ThornthwaiteModel, vars_in::Vector{Union{T, U}}, args...; kwargs...) where {T <: Real, U <: Int}\n\nCompute Thornthwaite climate classification zones from monthly temperature and precipitation data.\n\nArguments\n\nm::ThornthwaiteModel The model instance (not directly used in this implementation, provided for dispatch).\nvars_in::Vector{Union{T, U}} A length‚Äë28 vector containing:\nElements 1‚Äì4: (unused placeholders)\nElements 5‚Äì16: twelve monthly mean temperatures (Real values)\nElements 17‚Äì28: twelve monthly total precipitations (Real values)\n\nReturns\n\noutput::Vector{Any}   A vector of length 50 (initialized to zeros of type T), where:\noutput[1] is an Int code for the temperature zone:\nTropical  \nMesothermal  \nMicrothermal  \nTaiga  \nTundra  \nFrost  \noutput[2] is an Int code for the moisture zone:\nWet  \nHumid  \nSubhumid  \nSemiarid  \nArid  \nAll other entries remain zero.\n\n\n\n\n\nrun(m::WissmannModel, vars_in::Vector{<:Union{<:Real,<:Int}}, args...; kwargs...)\n\nClassify climate by the Wissmann scheme using 12 months of temperature and precipitation.\n\nArguments\n\nm::WissmannModel   Model instance (for dispatch).\nvars_in::Vector{Union{T,U}}   Length‚Äë28 vector where:\nindices 5‚Äì16: monthly mean temperatures\nindices 17‚Äì28: monthly precipitation totals\nargs..., kwargs...   Ignored extras.\n\nReturns\n\noutput::Vector{Int} (length‚ÄØ1)   Single-element vector holding the integer code (1‚Äì22) of the matched Wissmann zone.\n\nNotes\n\nComputes seasonal totals, mean, min/max temperatures.\nDetermines hemisphere to compare winter vs summer precipitation.\nApplies tiered thresholds for Polar, Boreal, Temperate, and Tropical groups.\n\n\n\n\n\n","category":"function"},{"location":"api/#Mechanistic-Model","page":"API","title":"Mechanistic Model","text":"","category":"section"},{"location":"api/#Base-functions","page":"API","title":"Base functions","text":"","category":"section"},{"location":"api/#Biome.assign_biome","page":"API","title":"Biome.assign_biome","text":"assign_biome(optpft::AbstractNeedleleafEvergreenPFT)\n\nAssign biome for AbstractNeedleleafEvergreenPFT  plant functional type.\n\nReturns NeedleleafEvergreenForest.\n\n\n\n\n\nassign_biome(optpft::BroadleafEvergreenBase)\n\nAssign biome for BroadleafEvergreenBase plant functional type.\n\nReturns BroadleafEvergreenForest.\n\n\n\n\n\nassign_biome(optpft::NeedleleafDeciduousBase)\n\nAssign biome for NeedleleafDeciduousBase plant functional type.\n\nReturns NeedleleafDeciduousForest.\n\n\n\n\n\nassign_biome(optpft::BroadleafDeciduousBase)\n\nAssign biome for BroadleafDeciduousBase plant functional type.\n\nReturns BroadleafDeciduousForest.\n\n\n\n\n\nassign_biome(optpft::AbstractC3GrassPFT)\n\nAssign biome for C3GrassBase plant functional type.\n\nReturns C3Grassland.\n\n\n\n\n\nassign_biome(optpft::AbstractC4GrassPFT)\n\nAssign biome for C4GrassBase plant functional type.\n\nReturns C4Grassland.\n\n\n\n\n\nassign_biome(optpft::Union{None, Default})\n\nAssign biome for None/Default plant functional type.\n\nReturns Desert biomes.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.c4photo","page":"API","title":"Biome.c4photo","text":"c4photo(ratio, dsun, daytime, temp, age, fpar, p, ca, pft)::Tuple{T,T,T}\n\nCalculate C4 photosynthesis based on environmental and plant functional type (PFT) parameters.\n\nArguments:\n\nratio: The ratio of intercellular to ambient CO2 concentration.\ndsun: Daily solar radiation (MJ/m¬≤/day).\ndaytime: Length of the day (hours).\ntemp: Air temperature (¬∞C).\nage: Leaf age (months).\nfpar: Fraction of photosynthetically active radiation absorbed by the canopy.\np: Atmospheric pressure (kPa).\nca: Ambient CO2 concentration (ppm).\npft: Plant Functional Type (integer index).\n\nReturns:\n\nleafresp: Leaf respiration rate.\ngrossphot: Gross photosynthesis rate.\naday: Net daily photosynthesis.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.calcphi","page":"API","title":"Biome.calcphi","text":"calcphi(gpp::AbstractVector{T})::T\n\nCalculate the maximum quantum yield of photosynthesis based on GPP data.\n\nArguments\n\ngpp: An array of 12 T values representing Gross Primary Productivity for each month.\n\nReturns\n\nphi: The calculated maximum quantum yield of photosynthesis.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.constraints","page":"API","title":"Biome.constraints","text":"constraints(tcm, twm, tminin, gdd5, rad0, gdd0, maxdepth, pftlist, pftstates)\n\nCalculate constraints for biome classification based on temperature, GDD, and  other parameters. Sets each PFT‚Äôs present flag in states.\n\nArguments\n\ntcm: Temperature of coldest month (¬∞C)\ntwm: Temperature of warmest month (¬∞C)\ntminin: Minimum temperature (¬∞C)\ngdd5: Growing degree days above 5¬∞C\nrad0: Annual radiation (MJ/m¬≤/year)   # (not used here, but kept for interface consistency)\ngdd0: Growing degree days above 0¬∞C\nmaxdepth: Maximum snow depth (mm)\npftlist: List of plant functional types to evaluate\npftstates: Dict mapping each AbstractPFT to its PFTState\n\nReturns\n\ntmin: Adjusted minimum temperature (¬∞C)\npftlist: (unchanged) PFT list\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.competition","page":"API","title":"Biome.competition","text":"BIOME4/BIOMEDominance Competition function.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.daily_interp","page":"API","title":"Biome.daily_interp","text":"daily_interp(mly::Vector{T})\n\nLinearly interpolate the mid-month values (mly) to daily values, modifying dly in place.\n\nArguments\n\nmly: A vector of 12 T values representing mid-month values.\n\nReturns\n\ndly:  A vector of 365T values representing daily interpolated values.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.findnpp","page":"API","title":"Biome.findnpp","text":"findnpp(pft, annp, dtemp, sun, temp, dprec, dmelt, dpet, dayl, k, dphen, co2, p, tsoil)\n\nFind optimal Net Primary Productivity (NPP) for a plant functional type.\n\nThis function runs an NPP optimization model for one PFT by iteratively testing different leaf area index (LAI) values to find the combination that maximizes NPP. Uses a binary search approach to converge on the optimal LAI.\n\nArguments\n\npft: Plant Functional Type to optimize\nannp: Annual precipitation (mm)\ndtemp: Daily temperature array (365 elements, ¬∞C)\nsun: Monthly solar radiation array (12 elements, MJ/m¬≤/day)\ntemp: Monthly temperature array (12 elements, ¬∞C)\ndprec: Daily precipitation array (365 elements, mm)\ndmelt: Daily snowmelt array (365 elements, mm)\ndpet: Daily potential evapotranspiration array (365 elements, mm)\ndayl: Monthly day length array (12 elements, hours)\nk: Soil and canopy parameter array\ndphen: Daily phenology array (365x2 matrix)\nco2: Atmospheric CO2 concentration (ppm)\np: Atmospheric pressure (kPa)\ntsoil: Monthly soil temperature array (12 elements, ¬∞C)\n\nReturns\n\nA tuple containing:\n\npft: The input plant functional type (potentially modified)\noptlai: Optimal leaf area index that maximizes NPP\noptnpp: Maximum net primary productivity achieved (gC/m¬≤/year)\n\nNotes\n\nReturns (pft, 0.0, 0.0) if the PFT is not present in the current conditions\nUses 8 iterations of binary search to converge on optimal LAI\nTests LAI values between 0.01 and 8.0\nCalls the growth() function to calculate NPP for each LAI value\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.fire","page":"API","title":"Biome.fire","text":"fire(wet::AbstractVector{T}, pft::U, lai::T, npp::T)::AbstractPFT\n\nCalculate the number of potential fire days in a year based on threshold values for soil moisture.\n\nArguments\n\nwet: A vector of 365 T values representing daily wetness.\npft: An integer representing the Plant Functional Type (PFT).\nlai: The Leaf Area Index.\nnpp: Net Primary Productivity.\n\nReturns\n\n'pft`: An updated Plant Functional Type (PFT) with the number of fire days set.'\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.growth","page":"API","title":"Biome.growth","text":"growth(maxlai, annp, sun, temp, dprec, dmelt, dpet, k, pft, dayl, dtemp, dphen, co2, p, tsoil, mnpp, c4mnpp)\n\nCalculate net primary productivity and carbon fluxes for a plant functional type.\n\nThis is the main growth function that integrates photosynthesis, respiration, hydrology, and carbon cycling to determine NPP and related carbon fluxes. The function handles both C3 and C4 photosynthesis pathways and includes iterative optimization for photosynthesis-conductance coupling.\n\nArguments\n\nmaxlai: Maximum leaf area index\nannp: Annual precipitation (mm)\nsun: Monthly solar radiation (12 elements, MJ/m¬≤/day)\ntemp: Monthly temperature (12 elements, ¬∞C)\ndprec: Daily precipitation (365 elements, mm)\ndmelt: Daily snowmelt (365 elements, mm)\ndpet: Daily potential evapotranspiration (365 elements, mm)\nk: Soil and canopy parameter array\npft: Plant functional type\ndayl: Monthly day length (12 elements, hours)\ndtemp: Daily temperature (365 elements, ¬∞C)\ndphen: Daily phenology array (365x2 matrix)\nco2: Atmospheric CO2 concentration (ppm)\np: Atmospheric pressure (kPa)\ntsoil: Monthly soil temperature (12 elements, ¬∞C)\nmnpp: Monthly NPP array to be filled (12 elements)\nc4mnpp: Monthly C4 NPP array to be filled (12 elements)\n\nReturns\n\nA tuple containing:\n\nnpp: Annual net primary productivity (gC/m¬≤/year)\nmnpp: Monthly NPP values (12 elements, gC/m¬≤/month)\nc4mnpp: Monthly C4 NPP values (12 elements, gC/m¬≤/month)\n\nNotes\n\nIncludes iterative bisection method for photosynthesis-conductance coupling\nHandles mixed C3/C4 photosynthesis for certain PFTs\nIntegrates fire disturbance effects\nCalculates isotopic signatures for carbon cycling\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.hetresp","page":"API","title":"Biome.hetresp","text":"hetresp(pft, nppann, tair, tsoil, aet, moist, isoveg, Rlit, Rfst, Rslo, Rtot, isoR, isoflux, Rmean, meanKlit, meanKsoil)\n\nModel heterotrophic respiration of litter and soil organic carbon in both a fast and a slow pool. It assumes equilibrium and so decays all of a given year's NPP. The 13C composition of respired CO2 is also modeled.\n\nArguments\n\npft: Plant Functional Type.\nnppann: Annual Net Primary Productivity.\ntair: Array of monthly air temperatures.\ntsoil: Array of monthly soil temperatures.\naet: Array of monthly Actual Evapotranspiration values.\nmoist: Array of monthly soil moisture values.\nisoveg: 13C composition of vegetation.\nRlit: Vector for litter respiration values (modified in place).\nRfst: Vector for fast pool respiration values (modified in place).\nRslo: Vector for slow pool respiration values (modified in place).\nRtot: Vector for total respiration values (modified in place).\nisoR: Vector for isotope respiration values (modified in place).\nisoflux: Vector for isotope flux values (modified in place).\nRmean: Mean respiration value.\nmeanKlit: Mean litter decay constant.\nmeanKsoil: Mean soil decay constant.\n\nReturns\n\nA tuple containing:\n\nRlit: Monthly litter respiration rates (Vector{T}).\nRfst: Monthly fast pool respiration rates (Vector{T}).\nRslo: Monthly slow pool respiration rates (Vector{T}).\nRtot: Monthly total respiration rates (Vector{T}).\nisoR: Monthly isotope respiration values (Vector{T}).\nisoflux: Monthly isotope flux values (Vector{T}).\nRmean: Mean annual respiration rate (T).\nmeanKlit: Mean litter decay constant (T).\nmeanKsoil: Mean soil decay constant (T).\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.hydrology","page":"API","title":"Biome.hydrology","text":"hydrology(dprec, dmelt, deq, root, k, maxfvc, pft, phentype, wst, gcopt, mgmin, dphen, dtemp, sapwood, emax) :: HydrologyResults\n\nCalculate the actual values of canopy conductance (gc), soil moisture, and other hydrological variables.\n\nArguments:\n\ndprec: Daily precipitation (365-element vector).\ndmelt: Daily snowmelt (365-element vector).\ndeq: Daily equilibrium evapotranspiration (365-element vector).\nroot: Root fraction (scalar).\nk: Array of soil and canopy parameters (vector of 7 elements).\nmaxfvc: Maximum foliar vegetation cover (scalar).\npft: Plant Functional Type (scalar).\nphentype: Phenological type (scalar).\nwst: Initial soil moisture (scalar).\ngcopt: Optimal canopy conductance (365-element vector).\nmgmin: Minimum canopy conductance modifier (scalar).\ndphen: Phenology data (365x2 matrix).\ndtemp: Daily temperature (365-element vector).\nsapwood: Presence of sapwood respiration.\nemax: Maximum evapotranspiration efficiency (scalar).\n\nReturns:\n\nmeanfvc: Mean monthly foliar vegetation cover.\nmeangc: Mean monthly canopy conductance.\nmeanwr: Mean monthly soil water reservoir (root zone, layer 1, and layer 2).\nmeanaet: Mean monthly actual evapotranspiration.\nrunoffmonth: Monthly runoff values.\nwet: Daily soil water reservoir values.\ndayfvc: Daily foliar vegetation cover.\nannaet: Annual actual evapotranspiration.\nsumoff: Total runoff and drainage.\ngreendays: Number of days with active vegetation.\nrunnoff: Final runoff value.\nwilt: Boolean indicating whether wilting occurred.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.isotope","page":"API","title":"Biome.isotope","text":"isotope(Cratio, Ca, temp, Rd, c4month, mgpp, phi, gpp)\n\nCalculate the total fractionation of 13C as it goes from free air (as 13CO2) to  fixed carbon in the leaf. For use with the BIOME3 model of A. Haxeltine (1996). There are separate routines for calculating fractionation by both C3 and C4 plants. This program is based upon the model used by Lloyd and Farquhar (1994).\n\nArguments\n\nCratio: Monthly ratios of intercellular to ambient CO2 concentration.\nCa: Ambient CO2 concentration (ppm).\ntemp: Monthly air temperatures (¬∞C).\nRd: Monthly daytime respiration rates (¬µmol m‚Åª¬≤ s‚Åª¬π).\nc4month: Boolean vector indicating C4 photosynthesis months.\nmgpp: Monthly gross primary productivity values.\nphi: Maximum quantum yield of photosynthesis.\ngpp: Annual gross primary productivity.\n\nReturns\n\nA tuple containing:\n\nmeanC3: Mean C3 isotopic fractionation weighted by GPP.\nmeanC4: Mean C4 isotopic fractionation weighted by GPP.\nC3DA: Monthly C3 isotopic fractionation values.\nC4DA: Monthly C4 isotopic fractionation values.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.phenology","page":"API","title":"Biome.phenology","text":"phenology(dphen, dtemp, temp, tcm, tmin, pft, ddayl)\n\nCalculate a generic phenology for any summergreen plant functional type.\n\nA three month period centered around the coldest month is defined as the  minimum period during which foliage is not present. Plants then start growing  leaves at the end of this 3 month period or when the temperature goes above  5¬∞C if this occurs later. Plants take 200 Growing Degree Days at 5¬∞C (GDD5) to grow a full leaf canopy.\n\nArguments\n\ndphen: Daily phenology array (365x2 matrix) to be modified\ndtemp: Daily temperature array (365 elements, ¬∞C)\ntemp: Monthly temperature array (12 elements, ¬∞C)\ntcm: Temperature of the coldest month (¬∞C)\ntmin: Minimum temperature (¬∞C)\npft: Plant Functional Type\nddayl: Daily day length array (365 elements, hours)\n\nReturns\n\ndphen: Modified daily phenology array (365x2 matrix)\n\nNotes\n\nPhencase 1: Evergreen Phenology\nPhencase 2: Alternative phenology based on GDD0\nFall leaf drop occurs when temperature < -10¬∞C or day length < 10 hours\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.photosynthesis","page":"API","title":"Biome.photosynthesis","text":"photosynthesis(ratio, dsun, daytime, temp, age, fpar, p, ca, pft)\n\nCalculate C3 photosynthesis based on environmental and plant functional type (PFT) parameters.\n\nArguments\n\nratio: The ratio of intercellular to ambient CO2 concentration.\ndsun: Daily solar radiation (MJ/m¬≤/day).\ndaytime: Length of the day (hours).\ntemp: Air temperature (¬∞C).\nage: Leaf age (months).\nfpar: Fraction of photosynthetically active radiation absorbed by the canopy.\np: Atmospheric pressure (kPa).\nca: Ambient CO2 concentration (ppm).\npft: Plant Functional Type (integer index).\n\nReturns\n\nleafresp: Leaf respiration rate.\ngrossphot: Gross photosynthesis rate.\naday: Net daily photosynthesis.\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.ppeett","page":"API","title":"Biome.ppeett","text":"ppeett(lat, dtemp, dclou, temp)\n\nCalculate insolation and potential evapotranspiration (PET) for each month.\n\nThis function computes daily potential evapotranspiration, day length, solar  radiation, and annual radiation based on latitude, temperature, and cloud cover.\n\nArguments\n\nlat: Latitude in degrees\ndtemp: Daily temperature array (365 elements, ¬∞C)\ndclou: Daily cloud cover array (365 elements, %)\ntemp: Monthly temperature array (12 elements, ¬∞C)\n\nReturns\n\nA tuple containing:\n\ndpet: Daily potential evapotranspiration (365 elements, mm/day)\ndayl: Monthly day length (12 elements, hours)\nsun: Monthly solar radiation (12 elements, MJ/m¬≤/day)\nrad0: Annual radiation sum (MJ/m¬≤/year)\nddayl: Daily day length (365 elements, hours)\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.respiration","page":"API","title":"Biome.respiration","text":"respiration(gpp, alresp, temp, sapwood, lai, monthlyfpar, pft)\n\nCalculate plant respiration components and net primary productivity (NPP) from  gross primary productivity (GPP).\n\nThis function computes various respiration costs including stem maintenance,  belowground maintenance, leaf respiration, and growth respiration to determine  the net primary productivity of a plant functional type.\n\nArguments\n\ngpp: Gross primary productivity (carbon gained through photosynthesis)\nalresp: Autotrophic leaf respiration\ntemp: Monthly temperature array (12 elements)\nsapwood: sapwood indicator (2 = sapwood, other = woody)\nlai: Leaf area index\nmonthlyfpar: Monthly fraction of photosynthetically active radiation  (12 elements)\npft: Plant functional type identifier\n\nReturns\n\nA tuple containing:\n\nnpp: Net primary productivity (-9999.0 if below minimum allocation  requirement)\nstemresp: Total annual stem maintenance respiration\npercentcost: Respiration costs as percentage of GPP\nmstemresp: Monthly stem maintenance respiration (12 elements)\nmrootresp: Monthly root maintenance respiration (12 elements)\nbackleafresp: Monthly leaf maintenance respiration (12 elements)\n\nNotes\n\nFor sapwood PFTs (sapwood == 2), stem respiration is set to zero\nTemperature-dependent respiration follows exponential relationship with  reference temperature of 10¬∞C\nNPP is set to -9999.0 if it falls below the minimum allocation requirement\nFunction uses multiple hardcoded constants that should ideally be moved to a  constants module\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.snow","page":"API","title":"Biome.snow","text":"snow(dtemp, dprecin)\n\nCalculate daily precipitation and snowmelt from daily temperature and  precipitation input. Snow accumulates when temperature is below the snow threshold and melts when temperature is above it.\n\nArguments\n\ndtemp: Daily temperature array (365 elements, ¬∞C)\ndprecin: Daily precipitation input array (365 elements, mm)\n\nReturns\n\nA tuple containing:\n\ndprec: Daily precipitation (rain) after accounting for snow (365 elements)\ndmelt: Daily snowmelt (365 elements, mm)\nmaxdepth: Maximum snow depth reached during the year (mm)\n\nNotes\n\nSnow threshold temperature is set to -1.0¬∞C\nMelt coefficient is 0.7 mm/¬∞C/day\nFunction runs twice to ensure equilibrium\n\n\n\n\n\n","category":"function"},{"location":"api/#Biome.table","page":"API","title":"Biome.table","text":"table(tc)\n\nExtract Gamma and Lambda based on temperature.\n\nLooks up gamma and lambda from the table based on the given temperature (tc).\n\nAuthor: Wolfgang Cramer, Dept. of Geography, Trondheim University-AVH, N-7055 Dragvoll, Norway. Latest revisions 14/2-1991\n\nArguments\n\ntc: Temperature for which gamma and lambda are looked up.\n\nReturns\n\nTuple{T, T}: gamma and lambda values based on the provided temperature.\n\n\n\n\n\n","category":"function"},{"location":"api/#BIOME4-specific-functions","page":"API","title":"BIOME4-specific functions","text":"","category":"section"},{"location":"api/#Biome.BIOME4.assign_biome","page":"API","title":"Biome.BIOME4.assign_biome","text":"assign_biome(optpft::LichenForb, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for LichenForb plant functional type.\n\nReturns Barren biome as LichenForb typically occurs in harsh environments.\n\n\n\n\n\nassign_biome(optpft::TundraShrubs, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TundraShrubs plant functional type.\n\nUses growing degree days above 0¬∞C to determine tundra biome type.\n\n\n\n\n\nassign_biome(optpft::ColdHerbaceous, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for ColdHerbaceous plant functional type.\n\nReturns SteppeTundra biome for cold herbaceous vegetation.\n\n\n\n\n\nassign_biome(optpft::BorealEvergreen, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for BorealEvergreen plant functional type.\n\nUses GDD5 and coldest month temperature to determine forest type.\n\n\n\n\n\nassign_biome(optpft::BorealDeciduous, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for BorealDeciduous plant functional type.\n\nDetermines forest type based on subordinate PFT and climate conditions.\n\n\n\n\n\nassign_biome(optpft::WoodyDesert, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for WoodyDesert plant functional type.\n\nUses NPP and LAI to determine desert or shrubland biome type.\n\n\n\n\n\nassign_biome(optpft::C3C4TemperateGrass, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for C3C4TemperateGrass plant functional type.\n\nUses NPP and GDD0 to determine grassland or tundra biome type.\n\n\n\n\n\nassign_biome(optpft::TemperateBroadleavedEvergreen, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TemperateBroadleavedEvergreen plant functional type.\n\nUses NPP to determine if mixed forest or desert biome is appropriate.\n\n\n\n\n\nassign_biome(optpft::TemperateDeciduous, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TemperateDeciduous plant functional type.\n\nComplex logic considering co-occurring PFTs and climate conditions.\n\n\n\n\n\nassign_biome(optpft::CoolConifer, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for CoolConifer plant functional type.\n\nDetermines conifer forest type based on co-occurring PFTs.\n\n\n\n\n\nassign_biome(optpft::TropicalEvergreen, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TropicalEvergreen plant functional type.\n\nReturns tropical evergreen forest if NPP is sufficient, otherwise desert.\n\n\n\n\n\nassign_biome(optpft::TropicalDroughtDeciduous, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for TropicalDroughtDeciduous plant functional type.\n\nUses NPP and green days to determine tropical forest type.\n\n\n\n\n\nassign_biome(optpft::C4TropicalGrass, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for C4TropicalGrass plant functional type.\n\nReturns tropical grassland if NPP is sufficient, otherwise desert.\n\n\n\n\n\nassign_biome(optpft::Default, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for Default plant functional type.\n\nUses woody dominant PFT to determine appropriate biome type.\n\n\n\n\n\nassign_biome(optpft::None, subpft, wdom, gdd0, gdd5, tcm, tmin, pftlist)\n\nAssign biome for None plant functional type.\n\nReturns Barren biome when no vegetation is present.\n\n\n\n\n\n","category":"function"},{"location":"pft_database/#Existing-Plant-functional-types","page":"PFT Database","title":"Existing Plant functional types","text":"","category":"section"},{"location":"pft_database/","page":"PFT Database","title":"PFT Database","text":"Select a PFT to see its parameters and distribution map.","category":"page"},{"location":"pft_database/","page":"PFT Database","title":"PFT Database","text":"note: Note\nTo submit new PFTs to this database, all you need to do is: Add the PFT parameters to docs/pfts/nameofthepft.toml\nAdd a map of the potential PFT distribution to docs/src/assets/pfts/maps/nameofthepft.png\nSubmit a PR!","category":"page"},{"location":"pft_database/","page":"PFT Database","title":"PFT Database","text":"\n<div id=\"pft-app\"></div>\n<script src=\"assets/pfts/pfts.js\" data-pft-base=\"assets/pfts/\"></script>\n","category":"page"},{"location":"koppen/#K√∂ppen-Geiger","page":"Koppen-Geiger","title":"K√∂ppen-Geiger","text":"","category":"section"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"The K√∂ppen‚ÄìGeiger system divides Earth‚Äôs climates into five primary groups: A (tropical), B (arid), C (temperate), D (continental) and E (polar). Each group is then further subdivided by patterns of seasonal precipitation and temperature thresholds. This biome classification relies on metrics such as the coldest and warmest monthly mean temperatures, total and driest-month precipitation, and the relative timing of wet and dry seasons, and outputs subtypes like Af (tropical rainforest), Cfb (oceanic) or BWh (hot desert), each mapped to a unique integer code.","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"K√∂ppen emphasized using monthly means and seasonal contrasts rather than only annual values, because vegetation and human environments respond to the timing of warmth and moisture as much as their totals. ","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"<figure> <img src=\"assets/outputkoppengeigerexample.svg\" alt=\"Example K√∂ppen‚ÄìGeiger map produced by the model (subtypes such as Af, Cfb, BWh; colors correspond to integer codes)\" width=\"100%\"> <figcaption><strong>Figure.</strong> Example K√∂ppen‚ÄìGeiger classification map.</figcaption> </figure>","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"These are the classes: ","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"Code Class\n1 Equatorial fully humid (Af)\n2 Equatorial monsoonal (Am)\n3 Equatorial summer dry (As)\n4 Equatorial winter dry (Aw)\n5 Cold desert (BWk)\n6 Hot desert (BWh)\n7 Cold steppe (BSk)\n8 Hot steppe (BSh)\n9 Warm temperate fully humid hot summer (Cfa)\n10 Warm temperate fully humid warm summer (Cfb)\n11 Warm temperate fully humid cool summer (Cfc)\n12 Warm temperate summer dry hot summer (Csa)\n13 Warm temperate summer dry warm summer (Csb)\n14 Warm temperate summer dry cool summer (Csc)\n15 Warm temperate, winter dry, hot summer (Cwa)\n16 Warm temperate, winter dry, warm summer (Cwb)\n17 Warm temperate, winter dry, cool summer (Cwc)\n18 Snow fully humid hot summer (Dfa)\n19 Snow fully humid warm summer (Dfb)\n20 Snow fully humid cool summer (Dfc)\n21 Snow fully humid extremely continental (Dfd)\n22 Snow summer dry hot summer (Dsa)\n23 Snow summer dry warm summer (Dsb)\n24 Snow summer dry cool summer (Dsc)\n25 Snow summer dry extremely continental (Dsd)\n26 Snow winter dry hot summer (Dwa)\n27 Snow winter dry warm summer (Dwb)\n28 Snow winter dry cool summer (Dwc)\n29 Snow winter dry extremely continental (Dwd)\n30 Polar tundra (ET)\n31 Polar frost (EF)","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"In the provided Julia implementation, the run function unpacks longitude, latitude, monthly temperature and precipitation from the input vector, computes summary statistics (min, max, mean), sums seasonal precipitation (winter vs. summer based on hemisphere), then applies the K√∂ppen‚ÄìGeiger decision tree against those thresholds and looks up the resulting symbol in a Dict{Symbol,Int} to produce a numeric climate class, finally returning that class along with the original coordinates.","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"You can call this model using ","category":"page"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"using Biome\nusing Rasters\n\n# Minimal inputs\ntempfile = \"/path/to/temp.nc\"   # monthly mean temperature (stacked in 3rd dim)\nprecfile = \"/path/to/prec.nc\"   # monthly precipitation (same grid/stacking)\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile,  name=\"prec\")\n\nsetup = ModelSetup(KoppenModel();\n                   temp=temp_raster,\n                   prec=prec_raster)\n\n# Process full grid (or pass \"lonmin/lonmax/latmin/latmax\")\nrun!(setup; coordstring=\"alldata\", outfile=\"output_Koppen.nc\")\n","category":"page"},{"location":"koppen/#Tips-for-tidy-outputs","page":"Koppen-Geiger","title":"Tips for tidy outputs","text":"","category":"section"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"Ensure temp and prec share identical grid, resolution, and ordering (lat can be asc/desc; the driver handles both).\nUnits: temperature in ¬∞C; precipitation in mm per month (match what your decision tree expects).\nThe NetCDF will contain koppen_class on (lon, lat). You can find the mapping of the integer codes to K√∂ppen symbols in the plotting script utils/plotting/plotting_kg.jl.","category":"page"},{"location":"koppen/#References","page":"Koppen-Geiger","title":"References","text":"","category":"section"},{"location":"koppen/","page":"Koppen-Geiger","title":"Koppen-Geiger","text":"K√∂ppen, W. Das geographische System der Klimate, 1‚Äì44 (Gebr√ºder Borntraeger: Berlin, Germany, 1936).\nBeck, H., Zimmermann, N., McVicar, T. et al. Present and future K√∂ppen-Geiger climate classification maps at 1-km resolution. Sci Data 5, 180214 (2018). https://doi.org/10.1038/sdata.2018.214","category":"page"},{"location":"biome4/#BIOME4","page":"BIOME4","title":"BIOME4","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"(Image: BIOME4 example)","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Figure. Example BIOME4-famil| Step | Original BIOME4 | Dominance-mode (Biome.jl) | |‚Äì-|‚Äì-|‚Äì-| | 3. Competition | Rule-based comparisons of woody vs. grass PFTs using thresholds on LAI, NPP, fire/greendays, and hand-crafted switches (e.g., temperate evergreen vs. cool conifer; woody-desert fallback; tundra shrub vs. cold herb). | Continuous scored ranking: climate-space dominance (Gaussian proximity to each PFT's optima for clt/temp/prec) √ó NPP √ó (1 / dominance_factor). Highest score wins; subdominants retained for mixed states. |utput. The NetCDF typically contains biome (class id), optpft (dominant PFT id), and npp (per-PFT) on the model grid.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"We offer two ways to run the BIOME4 logic:","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"","category":"page"},{"location":"biome4/#1)-Original-BIOME4","page":"BIOME4","title":"1) Original BIOME4","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"This path follows an exact translation of the original BIOME core (Haxeltine & Prentice; Kaplan & Prentice). The original Fortran sources by Jed O. Kaplan are available at: https://github.com/jedokaplan/BIOME4","category":"page"},{"location":"biome4/#Inputs-(climatologies;-aligned-grids)","page":"BIOME4","title":"Inputs (climatologies; aligned grids)","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Temperature (temp): ¬∞C, monthly means (stacked in the 3rd dimension)  \nPrecipitation (prec): mm month‚Åª¬π, monthly sums/means (consistent with your decision tree)  \nSun/Cloud (sun or clt): % (sunshine or cloudiness surrogate)  \nSoils (Ksat, whc): saturated conductivity (mm h‚Åª¬π) and water-holding capacity (mm cm‚Åª¬π)  \nCO‚ÇÇ: a single ppm value representative of the climatology period  \nPFT list: default BIOME4 PFTs, or a customized list","category":"page"},{"location":"biome4/#Outputs","page":"BIOME4","title":"Outputs","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"biome (lon,lat): BIOME4 biome id (Kaplan & Prentice mapping)  \noptpft (lon,lat): id of dominant PFT  \nnpp (lon,lat,pft): annual NPP per PFT (same order as pftlist)","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Notes","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Ensure all rasters share the same grid/extent and monthly stacking.  \nUnits: temp = ¬∞C; prec = mm month‚Åª¬π; sun/clt = %; Ksat = mm h‚Åª¬π; WHC = mm cm‚Åª¬π.  \nCO‚ÇÇ should match the climatology-period mean.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"","category":"page"},{"location":"biome4/#2)-Dominance-mode-(modified-competition)","page":"BIOME4","title":"2) Dominance-mode (modified competition)","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"This mode keeps the BIOME4 physiology (environmental sieve ‚Üí LAI & NPP per PFT) but modifies the competition step to rank PFTs by climate-space dominance plus productivity.","category":"page"},{"location":"biome4/#Rationale-(dominance-envelope)","page":"BIOME4","title":"Rationale (dominance envelope)","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"For each PFT and each climate variable (cloudiness, precipitation, temperature), we define an optimum and spread (fitted as a Gaussian in the PFT's observed/climatological niche). For a pixel value x_v and variable v  clt temp prec, we compute a standardized dominance contribution:","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"mathrmdom_v = expleft(-frac(x_v - mu_mathrmPFTv)^22sigma_mathrmPFTv^2right)","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Then sum (or weight/sum) across variables:","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"textdominance_environment = mathrmdom_textclt + mathrmdom_texttemp + mathrmdom_textprec","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Finally, combine climate dominance with productivity and a PFT-specific textdominance_factor:","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"mathrmscore_mathrmPFT = textdominance_environmenttimes mathrmNPP_mathrmPFT times frac1textdominance_factor_mathrmPFT","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"The PFT with the highest score is the dominant (optpft). Woody and grass subdominants are tracked for mixed cases.","category":"page"},{"location":"biome4/#Outputs-2","page":"BIOME4","title":"Outputs","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Same schema as the original mode (biome, optpft, npp).   The biome is still assigned using the BIOME4 PFT‚Üíbiome mapping after dominance is chosen.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"","category":"page"},{"location":"biome4/#What‚Äôs-different-in-competition?","page":"BIOME4","title":"What‚Äôs different in competition?","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"At a high level, both modes:","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Sieve PFTs by physiological constraints (e.g., tmin, gdd5/gdd0, tcm, twm, snow, soil water balance).  \nCompute LAI and NPP for all surviving PFTs.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"They diverge at step (3):","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Step Original BIOME4 Dominance-mode (Biome.jl)\n3. Competition Rule-based comparisons of woody vs. grass PFTs using thresholds on LAI, NPP, fire/greendays, and hand-crafted switches (e.g., temperate evergreen vs. cool conifer; woody-desert fallback; tundra shrub vs. cold herb). Continuous scored ranking: climate-space dominance (Gaussian proximity to each PFT‚Äôs optima for clt/temp/prec) √ó NPP √ó (1 / dominance_factor). Highest score wins; subdominants retained for mixed states.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"This preserves BIOME4‚Äôs physiology and the environmental sieve, while replacing the final ‚Äúif/else‚Äù winner logic with a continuous dominance score‚Äîmaking it easier to extend to custom PFT sets without rewriting many rule branches.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"","category":"page"},{"location":"biome4/#Inputs-‚Äî-recap-(mechanistic-modes)","page":"BIOME4","title":"Inputs ‚Äî recap (mechanistic modes)","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Required rasters: temp, prec (monthly stacks); typically also clt/sun, Ksat, whc.  \nCO‚ÇÇ: single ppm value representative of your climatology period.  \nPFT list: defaults to BIOME4.PFTClassification(); parameters/constraints can be customized.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Grid alignment is critical: all rasters must share the same X/Y grid and time stacking. Missing values are normalized internally to -9999.0.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"","category":"page"},{"location":"biome4/#Output-variables-(NetCDF)","page":"BIOME4","title":"Output variables (NetCDF)","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Coordinates: lon, lat  \nMechanistic schema  \nbiome :: Int16 ‚Äî BIOME4 biome id  \noptpft :: Int16 ‚Äî dominant PFT id  \nnpp :: Float64 ‚Äî shape (lon, lat, pft); includes num_pfts + 1 slots (default/mixed)","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Keep a sidecar legend for PFT id ‚Üí name and biome id ‚Üí label used in your plots.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"","category":"page"},{"location":"biome4/#Minimal-troubleshooting","page":"BIOME4","title":"Minimal troubleshooting","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Flat/missing output: check raster alignment/units; inspect the min/max debug prints in the driver.  \nEverything ‚ÄúNA‚Äù: verify units and that monthly stacks are on the 3rd dimension.  \nResume quirks: the driver skips rows where the primary variable (biome) already holds non-fill values; remove/rename the outfile to force a clean run.","category":"page"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"","category":"page"},{"location":"biome4/#References","page":"BIOME4","title":"References","text":"","category":"section"},{"location":"biome4/","page":"BIOME4","title":"BIOME4","text":"Haxeltine, A., & Prentice, I. C. (1996). BIOME3: An equilibrium terrestrial biosphere model based on ecophysiological constraints, resource availability, and competition among plant functional types. Global Biogeochemical Cycles, 10(4), 693‚Äì709.  \nKaplan, J., & Prentice, I. (2001). Geophysical Applications of Vegetation Modeling.  \nPrentice, I. C., Cramer, W., Harrison, S. P., Leemans, R., Monserud, R. A., & Solomon, A. M. (1992). A Global Biome Model Based on Plant Physiology and Dominance, Soil Properties and Climate. Journal of Biogeography, 19(2), 117‚Äì134.  \nBIOME4 Fortran sources: https://github.com/jedokaplan/BIOME4","category":"page"},{"location":"examples/#Examples","page":"Examples","title":"Examples","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"Here is some basic examples on how to run the package for different model types. ","category":"page"},{"location":"examples/#Climate-Envelope-models:","page":"Examples","title":"Climate Envelope models:","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"using Biome\nusing Rasters\n\ntempfile = \"\"\nprecfile = \"\"\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile, name=\"prec\")\n\nsetup = ModelSetup(KoppenModel();\n                   temp=temp_raster,\n                   prec=prec_raster)\n\nrun!(setup; coordstring=\"alldata\", outfile=\"output_Koppen.nc\")\n","category":"page"},{"location":"examples/#Mechanistic-models:","page":"Examples","title":"Mechanistic models:","text":"","category":"section"},{"location":"examples/#BIOME4","page":"Examples","title":"BIOME4","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"For the classic BIOME4 model, you need to initialize the BIOME4-specific PFTList.","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"PFTList = BIOME4.PFTClassification()","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"The PFTList is by default initialized in Float64 and Int, if you would rather use another type and use a different type  in your input data, specify it. ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"# i.e., using Float32\nPFTList = BIOME4.PFTClassification{Float32, Int}()","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"You are always welcome to remove some of its PFTs or to manually modify some of their characteristics. ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"Below is an example of using only a subset of the BIOME4 PFTs. ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"PFTList = BIOME4.PFTClassification{T,U}([\n        TropicalEvergreen{T,U}(),\n        TropicalDroughtDeciduous{T,U}(),\n        TemperateBroadleavedEvergreen{T,U}(),\n        TemperateDeciduous{T,U}(),\n        CoolConifer{T,U}(),\n        BorealEvergreen{T,U}()])","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"here is how you set up an entire run of BIOME4 with you own environmental input and PFTs","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"using Biome\nusing Rasters\n\ntempfile = \"\"\nprecfile = \"\"\ncltfile = \"\"\nsoilfile = \"\"\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile, name=\"prec\")\nclt_raster = Raster(cltfile, name=\"sun\")\nksat_raster = Raster(soilfile, name=\"Ksat\")\nwhc_raster = Raster(soilfile, name=\"whc\")\n\nPFTList = BIOME4.PFTClassification()\n\nsetup = ModelSetup(BIOME4Model();\n                   temp=temp_raster,\n                   prec=prec_raster,\n                   sun=clt_raster,\n                   ksat=ksat_raster,\n                   whc=whc_raster,\n                   co2=373.8,\n                   pftlist = PFTList)\n\nrun!(setup; coordstring=\"alldata\", outfile=\"output_biome4.nc\")","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"If you want to modify some of the PFT characteristics of you BIOME4 PFTList, you can do so usign the set_characteristicfunction, where we change the GDD5 of the \"BorealEvergreen\" PFT: ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"PFTList = BIOME4.PFTClassification()\nset_characteristic!(PFTList, \"BorealEvergreen\", :gdd5, [600.0, Inf])","category":"page"},{"location":"examples/#Base-Model","page":"Examples","title":"Base Model","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"The Base Model will allow you to build your biome concept from scratch, by building your PFTs and your PFT-to-biome mapping.","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"Without customization, the model looks as such. ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"using Biome\nusing Rasters\n\ntempfile = \"\"\nprecfile = \"\"\ncltfile = \"\"\nsoilfile = \"\"\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile, name=\"prec\")\nclt_raster = Raster(cltfile, name=\"sun\")\nksat_raster = Raster(soilfile, name=\"Ksat\")\nwhc_raster = Raster(soilfile, name=\"whc\")\n\n# BasePTS\npftlist = PFTClassification([\n        EvergreenPFT(),\n        DeciduousPFT(),\n        TundraPFT(),\n        GrassPFT(),\n    ]\n)\nsetup = ModelSetup(BaseModel;\n                   temp=temp_raster,\n                   prec=prec_raster,\n                   sun= clt_raster,\n                   ksat=ksat_raster,\n                   whc= whc_raster,\n                   co2=373.8,\n                   pftlist = pftlist)\n\nrun!(setup; coordstring=\"-180/0/-90/90\", outfile=\"output_BaseModel.nc\")","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"Creating 3 new PFTs and their associated biomes","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"using Biome\nusing Rasters\n\ntempfile = \"\"\nprecfile = \"\"\ncltfile = \"\"\nsoilfile = \"\"\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile, name=\"prec\")\nclt_raster = Raster(cltfile, name=\"sun\")\nksat_raster = Raster(soilfile, name=\"Ksat\")\nwhc_raster = Raster(soilfile, name=\"whc\")\n\n# Any custom PFT you want\nC4Grass = C4GrassPFT()\n\nTropicalEvergreen = BroadleafEvergreenPFT(\n    name = \"TropicalEvergreen\",\n    phenological_type = 1,\n    max_min_canopy_conductance = 0.5,\n    Emax = 10.0,\n    root_fraction_top_soil     = 0.69,\n    optratioa                  = 0.95,\n    kk                         = 0.7,\n    t0                         = 10.0,\n    tcurve                     = 1.0,\n    respfact                   = 0.8,\n    allocfact                  = 1.0,\n    constraints = (\n        tcm = [-Inf, +Inf],\n        tmin = [0.0, +Inf],\n        gdd5 = [-Inf, +Inf],\n        gdd0 = [-Inf, +Inf],\n        twm = [10.0, +Inf],\n        maxdepth  = [-Inf, +Inf],\n        swb = [700.0, +Inf]\n    ),\n    mean_val = (clt=50.2, prec=169.6, temp=24.7),\n    sd_val = (clt=4.9,  prec=41.9,  temp=1.2),\n    dominance_factor = 1\n)\n\nTemperateDeciduous = BroadleafDeciduousPFT(\n    name = \"TemperateDeciduous\",\n    constraints = (\n        tcm=[-Inf, +Inf],\n        tmin=[-8.0, 5.0],\n        gdd5=[1200, +Inf],\n        gdd0=[-Inf, +Inf],\n        twm=[10.0, +Inf],\n        maxdepth =[-Inf, +Inf],\n        swb=[400,+Inf]\n    ),\n    mean_val = (clt=33.4, prec=106.3, temp=18.7),\n    sd_val = (clt=13.3, prec=83.6,  temp=3.2),\n    dominance_factor = 1\n)\n\nstruct Savanna  <: AbstractBiome\n    value::Int\n    Savanna() = new(6)\n  end\n\nstruct TropicalEvergreenForest <: AbstractBiome\n    value::Int\n    TropicalEvergreenForest() = new(7)\n  end\n\n  struct TemperateDeciduousForest <: AbstractBiome\n    value::Int\n    TemperateDeciduousForest() = new(8)\n  end\n  \nfunction my_biome_assign(pft::AbstractPFT;\n    subpft,\n    wdom,\n    gdd0,\n    gdd5,\n    tcm,\n    tmin,\n    pftlist,\n    pftstates,\n    gdom)\n    if get_characteristic(pft, :c4)\n        return Savanna()\n    elseif  get_characteristic(pft, :name) == \"TropicalEvergreen\"\n        return TropicalEvergreenForest()\n    elseif get_characteristic(pft, :name) == \"TemperateDeciduous\"\n        return TemperateDeciduousForest()\n    else\n    # FIXME could we make this fallback silent\n        return Biome.assign_biome(pft;\n                subpft=subpft, wdom=wdom,\n                gdd0=gdd0, gdd5=gdd5,\n                tcm=tcm, tmin=tmin,\n                pftlist=pftlist,\n                pftstates=pftstates, gdom=gdom)\n    end\nend\n\n\nPFTList = PFTClassification([\n        BroadleafDeciduousPFT(),\n        C3GrassPFT(),\n        C4Grass,\n        TropicalEvergreen,\n        TemperateDeciduous\n    ]\n)\n\nsetup = ModelSetup(BaseModel();\n                   temp=temp_raster,\n                   prec=prec_raster,\n                   clt= clt_raster,\n                   ksat=ksat_raster,\n                   whc= whc_raster,\n                   co2=373.8,\n                   pftlist = PFTList,\n                   biome_assignment = my_biome_assign)\n\nrun!(setup; coordstring=\"alldata\", outfile=\"output_testCustom.nc\")\n","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"Such model output will look like: ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"(Image: custom_output)","category":"page"},{"location":"thornthwaite/#Thornthwaite","page":"Thornthwaite","title":"Thornthwaite","text":"","category":"section"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"The Thornthwaite system (1931 ‚Äì 1948) classifies climates both by how effectively precipitation meets evaporative demand and by thermal efficiency. It uses monthly temperature and precipitation to derive two indices‚Äîprecipitation-effectiveness (PE) and thermal-efficiency (TE)‚Äîand assigns each grid cell to a moisture zone and a temperature zone.","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"<figure>   <img src=\"assets/outputthornthwaiteexamples.svg\" alt=\"Example Thornthwaite climate zones (moisture and temperature classes)\" width=\"100%\">   <figcaption><strong>Figure.</strong> Example Thornthwaite classification map.</figcaption> </figure>","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"In our method, twelve monthly temperatures and precipitations are used to compute a precipitation-effectiveness index (PE) and a thermal-efficiency index (TE). PE then places the site into one of five moisture zones (Wet, Humid, Subhumid, Semiarid, Arid), and TE into one of six temperature zones (Tropical, Mesothermal, Microthermal, Taiga, Tundra, Frost), each mapped via simple thresholds.","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"These are the classes (row-major order: moisture √ó temperature):","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"Moisture \\ Temp Tropical (1) Mesothermal (2) Microthermal (3) Taiga (4) Tundra (5) Frost (6)\nWet 1 2 3 4 5 6\nHumid 7 8 9 10 11 12\nSubhumid 13 14 15 16 17 18\nSemiarid 19 20 21 22 23 24\nArid 25 26 27 28 29 30","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"Moisture order: Wet, Humid, Subhumid, Semiarid, Arid (1‚Üí5)   Temperature order: Tropical, Mesothermal, Microthermal, Taiga, Tundra, Frost (1‚Üí6)","category":"page"},{"location":"thornthwaite/#How-to-run-it","page":"Thornthwaite","title":"How to run it","text":"","category":"section"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"```julia using Biome using Rasters","category":"page"},{"location":"thornthwaite/#Minimal-inputs","page":"Thornthwaite","title":"Minimal inputs","text":"","category":"section"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"tempfile = \"/path/to/temp.nc\"   # monthly mean temperature (stacked in 3rd dim) precfile = \"/path/to/prec.nc\"   # monthly precipitation (same grid/stacking)","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"tempraster = Raster(tempfile, name=\"temp\") precraster = Raster(precfile,  name=\"prec\")","category":"page"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"setup = ModelSetup(ThornthwaiteModel();                    temp=tempraster,                    prec=precraster)","category":"page"},{"location":"thornthwaite/#Process-full-grid-(or-pass-\"lonmin/lonmax/latmin/latmax\")","page":"Thornthwaite","title":"Process full grid (or pass \"lonmin/lonmax/latmin/latmax\")","text":"","category":"section"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"run!(setup; coordstring=\"alldata\", outfile=\"output_Thornthwaite.nc\") ````","category":"page"},{"location":"thornthwaite/#References","page":"Thornthwaite","title":"References","text":"","category":"section"},{"location":"thornthwaite/","page":"Thornthwaite","title":"Thornthwaite","text":"Thornthwaite, C. W. (1931). The climates of North America: According to a new classification. , 21(4),. JSTOR. Geographical Review, 633‚Äì655.","category":"page"},{"location":"wissmann/#Wissmann","page":"Wissmann","title":"Wissmann","text":"","category":"section"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"The Wissmann scheme partitions climates into six major groups (from Tropical through Polar) and within each applies moisture thresholds to distinguish rainforest, monsoonal, steppe and desert subtypes.","category":"page"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"<figure>   <img src=\"assets/outputwissmannexample.svg\" alt=\"Example Wissmann climate regions (groups I‚ÄìVI with moisture subtypes)\" width=\"100%\">   <figcaption><strong>Figure.</strong> Example Wissmann classification map.</figcaption> </figure>","category":"page"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"In the provided function, the twelve monthly temperatures and precipitations are first summarized (min, max, mean temperatures; total and minimum precipitation; plus seasonal sums for ‚Äúwinter‚Äù and ‚Äúsummer‚Äù based on hemisphere). A dynamic precipitation threshold (t_threshold) is computed as ten times the mean annual temperature (shifted by +14 ¬∞C if summer is wetter than winter). The main classes are applied with thresholds:","category":"page"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"Polar ‚Äî Group VI if t_max < 0 ¬∞C; Group V if t_max < 10 ¬∞C.\nBoreal ‚Äî Group IV when t_mean < 4 ¬∞C, with four moisture subtypes (IVF humid, IVT winter-dry, IVS steppe, IVD desert) based on precipitation relative to 1√ó, 2√ó, or 2.5√ó t_threshold.\nCool temperate ‚Äî Group III when t_min < 2 ¬∞C, with analogous moisture splits and a winter-vs-summer dry distinction for Ts/Tw subtypes.\nWarm temperate ‚Äî Group II when 2 ¬∞C ‚â§ t_min < 13 ¬∞C; hot summers (t_max > 23 ¬∞C) split Fa/Fb (humid), and Ts/Tw or IS/ID for intermediate/arid regimes.\nTropical ‚Äî Group I when t_min ‚â• 13 ¬∞C; driest-month check (precip_min ‚â• 60 mm) yields IA rainforest, otherwise IF (weak dry period), IT (monsoonal), IS (savanna) or ID (desert) via the same 1‚Äì2.5√ó threshold bins.","category":"page"},{"location":"wissmann/#How-to-run-it","page":"Wissmann","title":"How to run it","text":"","category":"section"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"using Biome\nusing Rasters\n\n# Minimal inputs\ntempfile = \"/path/to/temp.nc\"   # monthly mean temperature (stacked in 3rd dim)\nprecfile = \"/path/to/prec.nc\"   # monthly precipitation (same grid/stacking)\n\ntemp_raster = Raster(tempfile, name=\"temp\")\nprec_raster = Raster(precfile,  name=\"prec\")\n\nsetup = ModelSetup(WissmannModel();\n                   temp=temp_raster,\n                   prec=prec_raster)\n\n# Process full grid (or pass \"lonmin/lonmax/latmin/latmax\")\nrun!(setup; coordstring=\"alldata\", outfile=\"output_Wissmann.nc\")","category":"page"},{"location":"wissmann/#References","page":"Wissmann","title":"References","text":"","category":"section"},{"location":"wissmann/","page":"Wissmann","title":"Wissmann","text":"Wissmann, H. (1939). In Die Klima- und Vegetationsgebiete Eurasiens: Begleitworte zu einer Karte der Klimagebiete Eurasiens (pp. 81‚Äì92). Erdk. Berlin.","category":"page"},{"location":"#Biome.jl","page":"Home","title":"Biome.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"üå± A modular framework for climate-based biome prediction","category":"page"},{"location":"","page":"Home","title":"Home","text":"Welcome to the documentation of Biome.jl a flexible, open-source modeling framework designed to simulate and analyze biome distributions under varying environmental conditions. We provide a modular and customizable engine to explore plant functional type (PFT) dynamics, equilibrium vegetation outcomes, and climate-driven biome classifications at global or regional scales.","category":"page"},{"location":"","page":"Home","title":"Home","text":"The package integrates both climatic envelope schemes  and mechanistic simulation approaches inspired by the BIOME4 model from Kaplan and Prentice (2001).","category":"page"},{"location":"","page":"Home","title":"Home","text":"Biome.jl extends these classical frameworks by enabling:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Customization of PFT definitions and physiological parameters\nUser-defined competition rules and biome classification schemes\nIntegration with parameter estimation tools (e.g. Turing.jl)\nHigh-resolution simulations and parallel processing on gridded landscapes\nScenario-based modeling (e.g. climate change, CO‚ÇÇ concentration, soil constraints)","category":"page"},{"location":"","page":"Home","title":"Home","text":"The goal of Biome.jl is to foster community-driven development of biome models that are reproducible, transparent, and extensible. ","category":"page"},{"location":"","page":"Home","title":"Home","text":"This documentation provides a comprehensive guide to:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Setting up and configuring models\nPreparing input datasets\nDefining custom PFTs and biomes\nRunning simulations across different schemes\nCalibrating parameters and evaluating results","category":"page"},{"location":"","page":"Home","title":"Home","text":"","category":"page"},{"location":"","page":"Home","title":"Home","text":"Start with the Getting Started guide to install and run your first Biome.jl model, or jump to the Model Configuration section for a deeper dive into custom simulations.","category":"page"},{"location":"#Credits","page":"Home","title":"Credits","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The following people are involved in the development of Biome.jl ","category":"page"},{"location":"","page":"Home","title":"Home","text":"Capucine Lechartre - Main development \nVictor Boussange - Code architecture\nNiklaus Zimmermann - Theoretical development\nPhilipp Brun - Theoretical development","category":"page"},{"location":"","page":"Home","title":"Home","text":"All contributors are affiliated with the Swiss Federal Institute for Forest, Snow, and Landscape Research WSL","category":"page"}]
}
